var numberOfMonthValue;
$(window).resize(function () {
   if ($(window).width() < 768) {
      numberOfMonthValue = 1;
      $("#departDate").datepicker("option", "numberOfMonths", numberOfMonthValue);
      $("#returnDate").datepicker("option", "numberOfMonths", numberOfMonthValue);
   } else {
      numberOfMonthValue = 2;
      $("#departDate").datepicker("option", "numberOfMonths", numberOfMonthValue);
      $("#returnDate").datepicker("option", "numberOfMonths", numberOfMonthValue);
   }
}).trigger('resize');

function split(t) {
   return t.split(/,\s*/);
}

function extractLast(t) {
   return split(t).pop();
}

function inIframe() {
   try {
      return window.self !== window.top;
   } catch (e) {
      return true;
   }
}
$(document).ready(function () {
   $('#isDropOffLocationPresent1').val(false);
   $('#isDropOffLocationPresent').val(false);
   $("#guestform").click(function () {
      $(".guests").toggle();
      $("#ui-datepicker-div").hide();
   });
   $('.confirm_room').click(function () {
      $('.guests').slideUp();
   });
   localStorage.removeItem('ls.couponsPopup');
   $('body').click(function () {
      $('#personOuter').removeClass('open');
   });
   $('.dropdown-menu').click(function (event) {
      event.stopPropagation();
   });
   $("#checkOutDate, #checkInDate").click(function () {
      $(".guests").hide();
   });
   $("input").click(function () {
      if (!$(this).attr("data-selected-all")) {
         try {
            $(this).selectionStart = 0;
            $(this).selectionEnd = $(this).value.length + 1;
            $(this).attr("data-selected-all", true);
         } catch (err) {
            $(this).select();
            $(this).attr("data-selected-all", true);
         }
      }
   });
   $("input").blur(function () {
      if ($(this).attr("data-selected-all")) {
         $(this).removeAttr("data-selected-all");
      }
   });

   function tog(v) {
      return v ? 'addClass' : 'removeClass';
   }
   $(document).on('input', '.input_cont', function () {
      $(this)[tog(this.value)]('x');
   }).on('mousemove', '.x', function (e) {
      $(this)[tog(this.offsetWidth - 18 < e.clientX - this.getBoundingClientRect().left)]('onX');
   }).on('touchstart click', '.onX', function (ev) {
      ev.preventDefault();
      $(this).removeClass('x onX').val('').change();
   });
   $('.mobile_menu').click(function () {
      $('.about-menuBox ul').toggleClass('open')
      $(this).toggleClass('menu-close')
      $('.main').toggleClass('push')
   });
   var t = !0,
      e = !0;
   $("#froCity").autocomplete({
      maxShowItems: 6,
      autoFocus: true,
      source: function (t, e) {
         $.getJSON("/get_city_list_new", {
            term: extractLast(t.term),
            type: "flight"
         }, e);
      },
      change: function (t, e) {
         if (!e.item) {
            $("#froCity").val("");
         }
      },
      search: function () {
         var t = extractLast(this.value);
         return t.length < 1 ? !1 : void 0;
      },
      focus: function (e, i) {
         var terms = split(this.value);
         terms.pop();
         terms.push(i.item.value);
         var sitem = i.item.value;
         var list1 = sitem.split("<div class='ddHide'>")[1];
         var list2 = list1.split('</div>')[0];
         return !1;
      },
      select: function (e, i) {
         localStorage.removeItem('ls.couponsPopup');
         var terms = split(this.value);
         terms.pop();
         terms.push(i.item.value);
         var sitem = i.item.value;
         var list1 = sitem.split("<div class='ddHide'>")[1];
         var list2 = list1.split('</div>')[0];
         this.value = list2;
         setTimeout(function () {
            $("#toCity").focus();
         }, 100);
         return !1
      }
   }).blur(function () {
      var found = false;
      var li = $('ul#ui-id-1 li a');
      li.each(function (e, i) {
         if ($("#froCity").val().toLowerCase() === i.text.toLowerCase()) {
            found = true;
            return;
         }
      })
      if (!found) {
         if ($("#froCity").val().indexOf("(") == -1) {
            $("#froCity").val("");
         }
      }
   }), $("#toCity").autocomplete({
      maxShowItems: 6,
      autoFocus: true,
      source: function (t, e) {
         $.getJSON("/get_city_list_new", {
            term: extractLast(t.term),
            type: "flight"
         }, e);
      },
      change: function (t, e) {
         if (!e.item) {
            $("#toCity").val("");
         }
      },
      search: function () {
         var t = extractLast(this.value);
         return t.length < 1 ? !1 : void 0;
      },
      focus: function (e, i) {
         var terms = split(this.value);
         terms.pop();
         terms.push(i.item.value);
         var sitem = i.item.value;
         var list1 = sitem.split("<div class='ddHide'>")[1];
         var list2 = list1.split('</div>')[0];
         return !1;
      },
      select: function (t, i) {
         localStorage.removeItem('ls.couponsPopup');
         var terms = split(this.value);
         terms.pop();
         terms.push(i.item.value);
         var sitem = i.item.value;
         var list1 = sitem.split("<div class='ddHide'>")[1];
         var list2 = list1.split('</div>')[0];
         this.value = list2;
         setTimeout(function () {
            $("#departDate").datepicker("show");
            $("#returnDate").parent().addClass("focus");
         }, 100);
         return !1;
      }
   }).blur(function () {
      var found = false;
      var li = $('ul#ui-id-2 li a');
      li.each(function (e, i) {
         if ($("#toCity").val().toLowerCase() === i.text.toLowerCase()) {
            $("#toCityFare").val($("#toCity").val());
            found = true;
            return;
         }
      })
      if (!found) {
         if ($("#toCity").val().indexOf("(") == -1) {
            $("#toCity").val("");
         }
      }
   });
   var i = !0,
      r = !0;
   $("#returnFroCity").autocomplete({
      maxShowItems: 6,
      autoFocus: true,
      source: function (t, e) {
         $.getJSON("/get_city_list_new", {
            term: extractLast(t.term),
            type: "flight"
         }, e);
      },
      change: function (t, e) {
         if (!e.item) {
            $("#returnFroCity").val("");
         }
      },
      search: function () {
         var t = extractLast(this.value);
         return t.length < 1 ? !1 : void 0;
      },
      focus: function (t, e) {
         var termsf = split(this.value);
         termsf.pop();
         termsf.push(e.item.value);
         var sitemf = e.item.value;
         var list1f = sitemf.split("<div class='ddHide'>")[1];
         var list2f = list1f.split('</div>')[0];
         return !1;
      },
      select: function (t, e) {
         var termsf = split(this.value);
         termsf.pop();
         termsf.push(e.item.value);
         var sitemf = e.item.value;
         var list1f = sitemf.split("<div class='ddHide'>")[1];
         var list2f = list1f.split('</div>')[0];
         this.value = list2f;
         setTimeout(function () {
            $("#returnToCity").focus();
         }, 100);
         return !1
      }
   }).blur(function () {
      var found = false;
      var li = $('ul#ui-id-3 li a');
      li.each(function (e, i) {
         if ($("#returnFroCity").val().toLowerCase() === i.text.toLowerCase()) {
            found = true;
            return;
         }
      })
      if (!found) {
         if ($("#returnFroCity").val().indexOf("(") == -1) {
            $("#returnFroCity").val("");
         }
      }
   }), $("#returnToCity").autocomplete({
      maxShowItems: 6,
      autoFocus: true,
      source: function (t, e) {
         $.getJSON("/get_city_list_new", {
            term: extractLast(t.term),
            type: "flight"
         }, e);
      },
      change: function (t, e) {
         if (!e.item) {
            $("#returnToCity").val("");
         }
      },
      search: function () {
         var t = extractLast(this.value);
         return t.length < 1 ? !1 : void 0;
      },
      focus: function (t, e) {
         var termst = split(this.value);
         termst.pop();
         termst.push(e.item.value);
         var sitemt = e.item.value;
         var list1t = sitemt.split("<div class='ddHide'>")[1];
         var list2t = list1t.split('</div>')[0];
         return !1;
      },
      select: function (t, e) {
         var termst = split(this.value);
         termst.pop();
         termst.push(e.item.value);
         var sitemt = e.item.value;
         var list1t = sitemt.split("<div class='ddHide'>")[1];
         var list2t = list1t.split('</div>')[0];
         this.value = list2t;
         return !1
      }
   }).blur(function () {
      var found = false;
      var li = $('ul#ui-id-4 li a');
      li.each(function (e, i) {
         if ($("#returnToCity").val().toLowerCase() === i.text.toLowerCase()) {
            found = true;
            return;
         }
      })
      if (!found) {
         if ($("#returnToCity").val().indexOf("(") == -1) {
            $("#returnToCity").val("");
         }
      }
   }), $("#stayCity").autocomplete({
      source: function (request, response) {
         $.getJSON("/get_city_list", {
            term: extractLast(request.term),
            type: "hotel"
         }, response)
      },
      change: function (event, ui) {
         if (!ui.item) {
            $("#stayCity").val("");
         }
      },
      search: function () {
         var term = extractLast(this.value);
         if (term.length < 3) {}
      },
      focus: function (event, ui) {
         var terms = split(this.value);
         terms.pop();
         terms.push(ui.item.value);
         var cityImage = ui.item.value;
         var hl = cityImage.split('</i>')[0] + '</i>';
         var h = cityImage.split('</i>')[1];
         var hdn = h.split("<span style='display: none;'>")[0];
         var hid = (h.split("<span style='display: none;'>")[1]).split("</span>")[0];
         $('#locationid').val(hid);
         var n = cityImage.indexOf("(");
         var l = cityImage.indexOf(")");
         cityImage = cityImage.substring(0, n);
         selectTo = !1;
         this.value = hdn;
         return !1
      },
      select: function (event, ui) {
         var terms = split(this.value);
         terms.pop();
         terms.push(ui.item.value);
         var cityImage = ui.item.value;
         var hl = cityImage.split('</i>')[0] + '</i>';
         var h = cityImage.split('</i>')[1];
         var hdn = h.split("<span style='display: none;'>")[0];
         var hid = (h.split("<span style='display: none;'>")[1]).split("</span>")[0];
         $('#locationid').val(hid);
         var n = cityImage.indexOf("(");
         var l = cityImage.indexOf(")");
         cityImage = cityImage.substring(0, n);
         selectTo = !1;
         this.value = hdn;
         return !1
      }
   }).blur(function () {
      if (selectTo) {}
   });
   var pSelectTo = null;
   $("#pickLocation").autocomplete({
      source: function (t, e) {
         $.getJSON("/get_city_list", {
            term: extractLast(t.term),
            type: "car"
         }, e);
      },
      change: function (event, ui) {
         if (!ui.item) {
            $("#pickLocation").val("");
         }
      },
      search: function () {
         var t = extractLast(this.value);
         return t.length < 3 ? !1 : void 0;
      },
      focus: function (event, ui) {
         var terms = split(this.value);
         terms.pop();
         terms.push(ui.item.value);
         var cityImage = ui.item.value;
         var hl = cityImage.split('</i>')[0] + '</i>';
         var h = cityImage.split('</i>')[1];
         var hdn = h.split("<span style='display: none;'>")[0];
         var hid = (h.split("<span style='display: none;'>")[1]).split("--")[0];
         var hCode = (cityImage.split('--')[1]).split("</span>")[0];
         hCode = ((hCode == null) || (hCode == 'null')) ? '' : hCode;
         $('#pickUpLocationID').val(hid);
         $('#pickUpLocationCode').val(hCode);
         var n = cityImage.indexOf("(");
         var l = cityImage.indexOf(")");
         cityImage = cityImage.substring(0, n);
         pSelectTo = !1;
         this.value = hdn;
         return !1
      },
      select: function (event, ui) {
         var terms = split(this.value);
         terms.pop();
         terms.push(ui.item.value);
         var cityImage = ui.item.value;
         var hl = cityImage.split('</i>')[0] + '</i>';
         var h = cityImage.split('</i>')[1];
         var hdn = h.split("<span style='display: none;'>")[0];
         var hid = (h.split("<span style='display: none;'>")[1]).split("--")[0];
         var hCode = (cityImage.split('--')[1]).split("</span>")[0];
         hCode = ((hCode == null) || (hCode == 'null')) ? '' : hCode;
         $('#pickUpLocationID').val(hid);
         $('#pickUpLocationCode').val(hCode);
         console.log("select hid " + hid);
         var n = cityImage.indexOf("(");
         var l = cityImage.indexOf(")");
         cityImage = cityImage.substring(0, n);
         pSelectTo = !1;
         this.value = hdn;
         return !1
      }
   }).blur(function () {
      if (pSelectTo) {
         $("#pickLocation").val($("ul#ui-id-6 li:first a").text());
      }
   });
   var dSelectTo = null;
   $("#dropLocation").autocomplete({
      source: function (t, e) {
         $.getJSON("/get_city_list", {
            term: extractLast(t.term),
            type: "car"
         }, e);
      },
      search: function () {
         var t = extractLast(this.value);
         return t.length < 3 ? !1 : void 0;
      },
      change: function (event, ui) {
         if (!ui.item) {
            $("#dropLocation").val("");
         }
      },
      focus: function (event, ui) {
         var terms = split(this.value);
         terms.pop();
         terms.push(ui.item.value);
         var cityImage = ui.item.value;
         var hl = cityImage.split('</i>')[0] + '</i>';
         var h = cityImage.split('</i>')[1];
         var hdn = h.split("<span style='display: none;'>")[0];
         var hid = (h.split("<span style='display: none;'>")[1]).split("--")[0];
         var hCode = (cityImage.split('--')[1]).split("</span>")[0];
         hCode = ((hCode == null) || (hCode == 'null')) ? '' : hCode;
         $('#dropOffLocationID').val(hid);
         $('#dropOffLocationCode').val(hCode);
         var n = cityImage.indexOf("(");
         var l = cityImage.indexOf(")");
         cityImage = cityImage.substring(0, n);
         dSelectTo = !1;
         this.value = hdn;
         return !1
      },
      select: function (event, ui) {
         var terms = split(this.value);
         terms.pop();
         terms.push(ui.item.value);
         var cityImage = ui.item.value;
         var hl = cityImage.split('</i>')[0] + '</i>';
         var h = cityImage.split('</i>')[1];
         var hdn = h.split("<span style='display: none;'>")[0];
         var hid = (h.split("<span style='display: none;'>")[1]).split("--")[0];
         var hCode = (cityImage.split('--')[1]).split("</span>")[0];
         hCode = ((hCode == null) || (hCode == 'null')) ? '' : hCode;
         $('#dropOffLocationID').val(hid);
         $('#dropOffLocationCode').val(hCode);
         var n = cityImage.indexOf("(");
         var l = cityImage.indexOf(")");
         cityImage = cityImage.substring(0, n);
         dSelectTo = !1;
         this.value = hdn;
         return !1
      }
   }).blur(function () {
      if (dSelectTo) {
         $("#dropLocation").val($("ul#ui-id-7 li:first a").text());
      }
   });
   $('.preFerredAirline').click(function () {
      $("#airlineDiv").slideToggle();
   });
   $('#select-air').on('change', function () {
      $("#airlinesPpc").val(this.value);
   });
});

function monkeyPatchAutocomplete() {
   var oldFn = $.ui.autocomplete.prototype._renderItem;
   $.ui.autocomplete.prototype._renderItem = function (ul, item) {
      var t = item.label.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + $.ui.autocomplete.escapeRegex(this.term) + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong class='highlight'>$1</strong>");
      return $("<li></li>").data("item.autocomplete", item).append("<a>" + t + "</a>").appendTo(ul)
   }
}
$(document).ready(function () {
   monkeyPatchAutocomplete();
   minDate = new Date();
   var x = 11;
   maxDate = new Date();
   maxDate.setMonth(maxDate.getMonth() + x);
   var x = 1;
   maxDateCar = new Date();
   maxDateCar.setMonth(maxDateCar.getMonth() + x);
   var ch = 2;
   checkInDate = new Date();
   checkInDate.setDate(checkInDate.getDate());
   var xs = 7;
   returnsDate = new Date();
   returnsDate.setDate(returnsDate.getDate() + xs);
   var dt_to = $.datepicker.formatDate('M dd, yy', new Date());
   var dt_from = $.datepicker.formatDate('M dd, yy', returnsDate);
   var checkInDate_from = $.datepicker.formatDate('M dd, yy', checkInDate);
   $("#pickDate").val(checkInDate_from);
   $("#dropDate").val(dt_from);
   $.datepicker.setDefaults($.datepicker.regional['en-AU']);
});
$(function () {
   $("#departDateDiv").click(function () {
      $('#departDate').datepicker('show');
      $("#returnDate").parent().addClass("focus");
   });
   var nOm;
   $(window).resize(function () {
      if ($(window).width() < 768) {
         nOm = 1;
         $("#departDate").datepicker("option", "numberOfMonths", nOm);
      } else {
         nOm = 2;
         $("#departDate").datepicker("option", "numberOfMonths", nOm);
      }
   }).trigger('resize');
   $("#departDate").datepicker({
      changeMonth: false,
      changeYear: false,
      dateFormat: "M dd, yy",
      showButtonPanel: true,
      beforeShowDay: function (date) {
         var startDate = $('#departDate').datepicker("getDate");
         var endDate = $('#returnDate').datepicker("getDate");
         if ($('#tripType').val() == '1') {
            endDate = "";
         }
         var className;
         if (startDate && (date.getTime() == startDate.getTime())) {
            className = "start-date"
         } else if (endDate && (date.getTime() == endDate.getTime())) {
            className = "end-date";
         } else if ((startDate && endDate) && (startDate < date && date < endDate)) {
            className = "between-date";
         } else {
            className = "";
         }
         return [true, className];
      },
      minDate: minDate,
      maxDate: maxDate,
      numberOfMonths: nOm,
      showOtherMonths: true,
      firstDay: 0,
      onClose: function () {
         var dateDepMin = $('#departDate').datepicker("getDate");
         day = dateDepMin.getDate(), year = dateDepMin.getFullYear();
         var monthNames = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
         month = monthNames[dateDepMin.getMonth()];
         var weekday = new Array(7);
         weekday[0] = "MON";
         weekday[1] = "TUE";
         weekday[2] = "WED";
         weekday[3] = "THU";
         weekday[4] = "FRI";
         weekday[5] = "SAT";
         weekday[6] = "SUN";
         var days = weekday[dateDepMin.getUTCDay()];
         var dateRetMin = $('#returnDate').datepicker("getDate");
         if (dateDepMin != null && dateDepMin != '') {
            if ($('#tripType').val() == '2') {
               $("#returnDate").datepicker("change", {
                  minDate: new Date(dateDepMin)
               });
               var dMin = new Date(dateDepMin.getFullYear(), dateDepMin.getMonth(), dateDepMin.getDate());
               if (dateRetMin != null) {
                  var rMin = new Date(dateRetMin.getFullYear(), dateRetMin.getMonth(), dateRetMin.getDate());
                  if (dMin > rMin) {
                     $('#returnDate').val($.datepicker.formatDate('M dd, yy', new Date(dMin)));
                     $('#returnDate').datepicker('show');
                  }
               } else {
                  $('#returnDate').val($.datepicker.formatDate('M dd, yy', new Date(dMin)));
                  $('#returnDate').datepicker('show');
               }
            }
         }
      }
   }).focus(function () {
      $("#returnDate").parent().addClass("focus");
   });
});
$(function () {
   $("#returnDateDiv").click(function () {
      if ($('#tripType').val() == "2") {
         $('#returnDate').datepicker('show');
         $("#departDate").parent().addClass("focus");
      }
   });
   var nOm;
   $(window).resize(function () {
      if ($(window).width() < 768) {
         nOm = 1;
         $("#departDate").datepicker("option", "numberOfMonths", nOm);
      } else {
         nOm = 2;
         $("#departDate").datepicker("option", "numberOfMonths", nOm);
      }
   }).trigger('resize');
   $("#returnDate").datepicker({
      changeMonth: false,
      changeYear: false,
      dateFormat: "M dd, yy",
      showButtonPanel: true,
      firstDay: 0,
      beforeShowDay: function (date) {
         var startDate = $('#departDate').datepicker("getDate");
         var endDate = $('#returnDate').datepicker("getDate");
         var className;
         if (startDate && (date.getTime() == startDate.getTime())) {
            className = "start-date"
         } else if (endDate && (date.getTime() == endDate.getTime())) {
            className = "end-date";
         } else if ((startDate && endDate) && (startDate < date && date < endDate)) {
            className = "between-date";
         } else {
            className = "";
         }
         return [true, className];
      },
      minDate: minDate,
      maxDate: maxDate,
      numberOfMonths: nOm,
      onClose: function () {
         var dateDepMin = $('#departDate').datepicker("getDate");
         var dateRetMin = $('#returnDate').datepicker("getDate");
         day = dateRetMin.getDate(), year = dateRetMin.getFullYear();
         var monthNames = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
         month = monthNames[dateRetMin.getMonth()];
         var weekday = new Array(7);
         weekday[0] = "MON";
         weekday[1] = "TUE";
         weekday[2] = "WED";
         weekday[3] = "THU";
         weekday[4] = "FRI";
         weekday[5] = "SAT";
         weekday[6] = "SUN";
         var days = weekday[dateRetMin.getUTCDay()];
         if (dateDepMin != null && dateDepMin != '') {
            var dMin = new Date(dateDepMin.getFullYear(), dateDepMin.getMonth(), dateDepMin.getDate());
            if (dateRetMin != null) {
               var rMin = new Date(dateRetMin.getFullYear(), dateRetMin.getMonth(), dateRetMin.getDate());
               if (dMin > rMin) {
                  alert('Returning date always equal or greater than departure date!');
                  $("#returnDate").val('');
               }
               $('#returnDate').removeClass("error");
               $("span.error").css("display", "none");
            }
         }
      }
   }).blur(function () {
      $("#departDate").parent().removeClass("focus");
      $("#returnDate").parent().removeClass("focus");
   }).focus(function () {
      $("#departDate").parent().addClass("focus");
   });
});
$(function () {
   var d = new Date();
   var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
   today = monthNames[d.getMonth()] + ' ' + d.getDate() + ' ' + d.getFullYear();
   var minDate = new Date();
   var maxDate = new Date();
   $("#checkInDateDiv").click(function () {
      $("#checkInDate").datepicker("show")
   }), $("#checkInDate").datepicker({
      numberOfMonths: numberOfMonthValue,
      dateFormat: "M dd, yy",
      showButtonPanel: true,
      firstDay: 0,
      minDate: minDate,
      maxDate: "+11m",
      onClose: function () {
         var dropDateMin = $("#checkInDate").datepicker("getDate");
         try {
            if (dropDateMin != null && dropDateMin != '') {
               $("#checkOutDate").val($("#checkInDate").val());
               var from = $('#checkInDate').datepicker('getDate');
               var date_diff = Math.ceil((from.getTime() - Date.parse(today)) / 86400000);
               var maxDatedrop = date_diff + 30 + 'd';
               var minDatedrop = date_diff + 1 + 'd';
               $("#checkOutDate").datepicker("change", {
                  minDate: minDatedrop
               });
               $("#checkOutDate").datepicker("change", {
                  maxDate: maxDatedrop
               });
            }
         } catch (e) {}
         $("#checkOutDate").datepicker('show');
      }
   })
});
$(function () {
   var d = new Date();
   var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
   today = monthNames[d.getMonth()] + ' ' + d.getDate() + ' ' + d.getFullYear();
   var maxDate1 = new Date();
   var from = new Date(maxDate1.getFullYear(), maxDate1.getMonth(), maxDate1.getDate());
   var date_diff = Math.ceil((from.getTime() - Date.parse(today)) / 86400000);
   maxDate1 = date_diff + 30 + 'd';
   var minDate1 = new Date();
   minDate1 = date_diff + 2 + 'd';
   $("#checkOutDateDiv").click(function () {
      $("#checkOutDate").datepicker("show")
   }), $("#checkOutDate").datepicker({
      numberOfMonths: numberOfMonthValue,
      dateFormat: "M dd, yy",
      showButtonPanel: true,
      firstDay: 0,
      minDate: minDate1,
      maxDate: maxDate1,
   })
});
$(function () {
   var d = new Date();
   var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
   today = monthNames[d.getMonth()] + ' ' + d.getDate() + ' ' + d.getFullYear();
   var nOm;
   $(window).resize(function () {
      if ($(window).width() < 768) {
         nOm = 1;
         $("#departDate").datepicker("option", "numberOfMonths", nOm);
      } else {
         nOm = 2;
         $("#departDate").datepicker("option", "numberOfMonths", nOm);
      }
   }).trigger('resize');
   $("#pickDate").datepicker({
      changeMonth: false,
      changeYear: false,
      dateFormat: "M dd, yy",
      showButtonPanel: true,
      minDate: checkInDate,
      maxDate: maxDate,
      numberOfMonths: nOm,
      firstDay: 0,
      onClose: function () {
         var a = $("#pickDate").datepicker("getDate");
         day = a.getDate(), year = a.getFullYear();
         var b = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
         month = b[a.getMonth()];
         var c = new Array(7);
         c[0] = "MON", c[1] = "TUE", c[2] = "WED", c[3] = "THU", c[4] = "FRI", c[5] = "SAT", c[6] = "SUN";
         var f = $("#dropDate").datepicker("getDate");
         if (null != a && "" != a) {
            var date_diff = Math.ceil((a.getTime() - Date.parse(today)) / 86400000);
            var maxDatedrop = date_diff + 30 + 'd';
            $("#dropDate").datepicker("change", {
               minDate: new Date(a),
               maxDate: maxDatedrop
            });
            var g = new Date(a.getFullYear(), a.getMonth(), a.getDate());
            if (null != f) {
               var h = new Date(f.getFullYear(), f.getMonth(), f.getDate());
               g > h && ($("#dropDate").val($.datepicker.formatDate("M dd, yy", new Date(g))), $("#dropDate").datepicker("show"))
            } else $("#dropDate").val($.datepicker.formatDate("M dd, yy", new Date(g))), $("#dropDate").datepicker("show")
         }
      }
   });
   var pd = $("#pickDate").datepicker("getDate");
   var dd = $("#dropDate").datepicker("getDate");
   var pDate = new Date(pd.getFullYear(), pd.getMonth(), pd.getDate());
   var dDate = new Date(pd.getFullYear(), pd.getMonth(), pd.getDate());
   dDate.setMonth(pDate.getMonth() + 1);
   $("#dropDate").datepicker({
      changeMonth: false,
      changeYear: false,
      dateFormat: "M dd, yy",
      showButtonPanel: true,
      minDate: pDate,
      maxDate: dDate,
      firstDay: 0,
      numberOfMonths: nOm,
      onClose: function () {
         var a = $("#pickDate").datepicker("getDate"),
            b = $("#dropDate").datepicker("getDate");
         day = b.getDate(), year = b.getFullYear();
         var c = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
         month = c[b.getMonth()];
         var d = new Array(7);
         d[0] = "MON", d[1] = "TUE", d[2] = "WED", d[3] = "THU", d[4] = "FRI", d[5] = "SAT", d[6] = "SUN";
      }
   });
});
$('.form-group-select-plus').each(function () {
   var self = $(this),
      btnGroup = self.find('.btn-group').first(),
      select = self.find('select');
   btnGroup.children('label').last().click(function () {
      btnGroup.addClass('hidden');
      select.removeClass('hidden');
   });
   btnGroup.children('label:not(:last-child)').click(function () {
      select.val($(this).children("input:eq(0)").data("value"));
   });
});
numMonth = 1;
$("#adult").val("1");
$("#infant").val("0");
$("#child").val("0");
$("#infantws").val("0");
$(function () {
   $('.offcanvas-toggle-btn').click(function () {
      $('body').toggleClass('active');
   });
})

function ddlTypejourneyChange(ddlType) {
   if (ddlType == "1") {
      $('#tripType').val(1);
      var dateDepMin = $('#departDate').datepicker("getDate");
      $("#returnDate").datepicker("change", {
         minDate: new Date(dateDepMin)
      });
      $("input[name='returnDate']").prop("disabled", true);
      $("#returnDate").prop("disabled", true);
      $("#returnDate").parent().addClass('disableReturnDate').parent().hide();
      $("#departDateDiv").removeClass('col-sm-2').addClass('full-col');
      $("#jawEngineLink").hide();
      $("#jawEngineDiv").hide();
   } else if (ddlType == "2") {
      $('#tripType').val(2);
      $("input[name='returnDate']").prop("enabled", true);
      $("#returnDate").prop("disabled", false);
      $("#jawEngineLink").show();
      var xs = 7;
      var dd = $("#departDate").val().split("-");
      minDate = new Date(dd[2] + "/" + dd[0] + "/" + dd[1]);
      minDate.setDate(minDate.getDate() + xs);
      $("#returnDate").datepicker("change", {
         minDate: new Date(dd[2] + "-" + dd[0] + "-" + dd[1])
      });
      var dt_from = $.datepicker.formatDate('M dd, yy', minDate);
      $("#returnDate").val(dt_from);
      document.getElementById("returnDate").value = dt_from;
      $("#returnDate").parent().addClass('disableReturnDate').parent().show();
      $("#returnDate").parent().removeClass('disableReturnDate');
      $("#departDateDiv").removeClass('full-col');
   } else {
      $('#tripType').val(2);
      $("#returnDate").prop("disabled", false);
   }
}
$.validator.addMethod('le', function (value, element, param) {
   return this.optional(element) || value <= $(param).val();
}, 'Invalid value');
$.validator.addMethod("greaterThan", function (value, element, params) {
   if (!/Invalid|NaN/.test(new Date(value))) {
      return new Date(value) > new Date($(params).val());
   }
   return isNaN(value) && isNaN($(params).val()) || (Number(value) > Number($(params).val()));
}, 'Must be greater than {0}.');

function submitForm() {
   $("#error").html("");
   var validator = $("#flightSearch").validate({
      rules: {
         froCity: {
            required: true,
            minlength: 3
         },
         toCity: {
            required: true,
            minlength: 3
         },
         froDate: {
            required: true,
         },
         toDate: {
            required: {
               depends: function (element) {
                  if ($('#tripType').val() == '2') {
                     return true;
                  } else {
                     return false;
                  }
               }
            }
         },
         adult: {
            required: true,
            range: [1, 9]
         },
         infant: {
            required: true,
            range: [0, 8],
            le: '#adult'
         },
      },
      errorElement: "span",
      messages: {
         froCity: {
            required: "Please Enter Origin.",
            minlength: "Origin City must consist of at least 3 characters"
         },
         toCity: {
            required: "Please Enter Destination.",
            minlength: "Destination City must consist of at least 3 characters",
         },
         froDate: {
            required: "Please enter a valid Depart Date.",
         },
         toDate: {
            required: "Please enter a valid Return Date.",
         },
         infant: {
            required: "Please enter a valid Return Date.",
            le: "Infant less than or equal to adult"
         },
      }
   });
   var adults = parseInt($("#adult").val());
   if (adults == 0) {
      if (messhow) {
         messhow = false;
         $.notify('Booking flights for an unaccompanied minor? Some airlines have restrictions on children under the age of 18 years traveling alone. If you have any questions, please <a href="/contact-us" target="_blank" style="text-decoration:underline;">contact us</a>.', 'warning');
      }
      return false;
   }
   if (validator.form()) {
      var total = parseInt($("#adult").val()) + parseInt($("#child").val()) + parseInt($("#infant").val()) + parseInt($("#infantWs").val());
      var adults = parseInt($("#adult").val());
      var infants = parseInt($("#infant").val())
      if (infants > adults) {
         $("#error").html("<p>Â» Infant less than or equal to adult.</p>")
         return false;
      }
      if (adults == 0) {
         if (messhow) {
            messhow = false;
            $.notify('Booking flights for an unaccompanied minor? Some airlines have restrictions on children under the age of 18 years traveling alone. If you have any questions, please <a href="/contact-us" target="_blank" style="text-decoration:underline;">contact us</a>.', 'warning');
         }
         return false;
      }
      if (total >= 10) {
         $("#error").html("<p> Total number of Passenger should be less than or equal to 9 only.</p>")
         return false;
      }
      var startDate = new Date($('#froDate').val());
      var endDate = new Date($('#returnDate').val());
      if (startDate < endDate) {
         $("#error").html("<p>Return date should be equal or greater than Depart date.</p>")
         return false;
      }
      if ((airpotCode("#froCity") == airpotCode("#toCity")) && (airpotCode("#toCity").length > 0 || airpotCode("#froCity").length > 0)) {
         $("#error").html("<p> Please enter a different Origin and Destination/City airport!</p>")
         return false;
      }
      if ((airpotCode("#returnFroCity") == airpotCode("#froCity")) || (airpotCode("#returnToCity") == airpotCode("#toCity")) || ((airpotCode("#returnFroCity") == airpotCode("#toCity")) && (airpotCode("#returnToCity") == airpotCode("#froCity")))) {
         $("#error").html("<p>Please enter a different Origin and Destination/City airport!</p>")
         return false;
      }
      if ($.trim($("#returnFroCity").val()).length > 3 && $.trim($("#returnToCity").val()).length == 0 || $.trim($("#returnFroCity").val()).length == 0 && $.trim($("#returnToCity").val()).length > 3) {
         $("#error").html("<p>Please enter a different Origin and Destination/City airport!</p>")
         return false;
      }
      var rndId = randomString(24);
      if ($('#currentDevice').val() == "Normal") {
         $('form#flightSearch').attr({
            action: '/search/id/' + rndId
         });
      } else if ($('#currentDevice').val() == "Mobile") {
         $('form#flightSearch').attr({
            action: '/m/search/id/' + rndId
         });
      } else if ($('#currentDevice').val() == "Tablet") {
         $('form#flightSearch').attr({
            action: '/t/search/id/' + rndId
         });
      } else {
         $('form#flightSearch').attr({
            action: '/search/id/' + rndId
         });
      }
      localStorage.removeItem("underCutPriceShow");
      localStorage.removeItem("underCutPriceSet");
      localStorage.removeItem("underCutFromPayment");
      localStorage.removeItem("recentCheckIds");
      localStorage.removeItem("packopen");
      localStorage.removeItem("farealertshow");
      localStorage.removeItem("UCBanner_close_packedbag_open");
      var utmResSource = "";
      var utmSourceCallTFN = $("#utmSourceCallTFN").val().toLowerCase();
      try {
         utmResSource = $("#utmResSource").val().toLowerCase();
      } catch (err) {
         utmResSource = "";
      }
      var isIframe = inIframe();
      var utm_source_url = "";
      try {
         var urlParams = new URLSearchParams(window.location.search);
         utm_source_url = urlParams.get('utm_source');
         utm_source_url = utm_source_url.toLowerCase();
      } catch (err) {}
      if (isIframe || utmResSource == 'packedbag') {
         $('form#flightSearch').removeAttr("target");
      } else if (utmResSource == 'online' || utmResSource == 'bing' || utmResSource == 'social' || utmResSource == 'instagram') {
         $('form#flightSearch').removeAttr("target");
      } else if (utm_source_url == 'social' || utm_source_url == 'instagram') {
         $('form#flightSearch').removeAttr("target");
      } else if (utmSourceCallTFN == 'online' || utmSourceCallTFN == 'bing' || utmSourceCallTFN == '') {
         $('form#flightSearch').removeAttr("target");
      } else {
         try {
            var froCity = $("#froCity").val();
            var from_city = froCity;
            if (froCity.indexOf("(") != -1) {
               from_city = froCity.substring(froCity.indexOf("(") + 1, froCity.indexOf(")"));
            }
            var toCity = $("#toCity").val();
            var to_city = toCity;
            if (toCity.indexOf("(") != -1) {
               to_city = toCity.substring(toCity.indexOf("(") + 1, toCity.indexOf(")"));
            }
            var tripType = $("#tripType").val();
            var adult = $("#adult").val();
            var child = $("#child").val();
            var infant = $("#infant").val();
            var infantWs = $("#infantWs").val();
            var cabin_Class = $("#cabinClass").val();
            var fro_Date = $("#departDate").val();
            var to_Date = $("#returnDate").val();
            var utmSourceCallTFN = $("#utmSourceCallTFN").val();
            if (utmSourceCallTFN == '') {
               utmSourceCallTFN = 'online';
            }
            var utm_source = "cff_" + utmSourceCallTFN;
            setTimeout(function () {
               localStorage.setItem("packopen", true);
               window.location.href = "https://www.packedbag.com/searchresults/sites?origin=" + from_city + "&destination=" + to_city + "&triptype=" + tripType + "&adults=" + adult + "&children=" + child + "&infant=" + infant + "&infantws=" + infantWs + "&cabintype=" + cabin_Class + "&departdate=" + fro_Date + "&returndate=" + to_Date + "&utmsource=" + utm_source + "&site=6&server=CFF1";
            }, 250);
         } catch (err) {}
      }
      $('form#flightSearch').submit();
   }
}

function airpotCode(id) {
   var sval = $.trim($(id).val());
   if ($.trim($(id).val()).length > 0 && $.trim($(id).val()).length > 3) {
      try {
         var f1 = sval.split("(");
         var f2 = f1[1].split(")");
         console.log("f2 " + f2)
         sval = f2[0];
      } catch (err) {}
   }
   return sval;
}

function hotelBrandSearch(lid, sid, chid, scity, country, indate, outdate, brandName) {
   var res = indate.split("T");
   var res2 = res[0].split("-");
   indate = res2[1] + '-' + res2[2] + '-' + res2[0];
   res = "";
   res2 = "";
   res = outdate.split("T");
   res2 = res[0].split("-");
   outdate = res2[1] + '-' + res2[2] + '-' + res2[0];
   $('#stayCity').val(scity + ',' + country);
   $('#checkInDate').val(indate);
   $('#checkOutDate').val(outdate);
   $('#locationid').val(lid);
   $('#supplierId').val(sid);
   $('#cffHotelId').val(chid);
   $('#hotelBrand').val(brandName);
   submitHotelForm();
};

function hotelDealSearch(lid, sid, chid, scity, country, indate, outdate) {
   var res = indate.split("T");
   var res2 = res[0].split("-");
   indate = res2[1] + '-' + res2[2] + '-' + res2[0];
   res = "";
   res2 = "";
   res = outdate.split("T");
   res2 = res[0].split("-");
   outdate = res2[1] + '-' + res2[2] + '-' + res2[0];
   if ((country == ' ') || (country == '')) {
      $('#stayCity').val(scity);
   } else {
      $('#stayCity').val(scity + ',' + country);
   }
   $('#checkInDate').val(indate);
   $('#checkOutDate').val(outdate);
   $('#locationid').val(lid);
   $('#supplierId').val(sid);
   $('#cffHotelId').val(chid);
   $('#hotelBrand').val("");
   submitHotelForm();
};

function submitHotelForm() {
   var a = $("#searchHotel").validate({
      rules: {
         stayCity: {
            required: !0,
            minlength: 3
         },
         checkInDate: {
            required: !0
         },
         checkOutDate: {
            required: !0
         },
         room: {
            required: !0,
            range: [1, 5]
         }
      },
      errorElement: "span",
      messages: {
         stayCity: {
            required: "Please Enter Destination City.",
            minlength: "Destination City must consist of at least 3 characters"
         },
         checkInDate: {
            required: "Please enter a valid Check-In Date."
         },
         checkOutDate: {
            required: "Please enter a valid Check-Out Date."
         }
      }
   });
   if (a.form()) {
      var b = randomString(24);
      if ($('#currentDevice').val() == "Normal") {
         $("form#searchHotel").attr({
            action: "/hotelSearch/id/" + b
         });
      } else if ($('#currentDevice').val() == "Mobile") {
         $("form#searchHotel").attr({
            action: "/m/hotelSearch/id/" + b
         });
      } else if ($('#currentDevice').val() == "Tablet") {
         $("form#searchHotel").attr({
            action: "/t/hotelSearch/id/" + b
         });
      } else {
         $("form#searchHotel").attr({
            action: "/hotelSearch/id/" + b
         });
      }
      $("form#searchHotel").submit()
   }
}
var messhow = true;

function unaccompanied() {
   if (messhow) {
      messhow = false;
      $.notify('Booking flights for an unaccompanied minor? Some airlines have restrictions on children under the age of 18 years traveling alone. If you have any questions, please <a href="/contact-us" target="_blank" style="text-decoration:underline;">contact us</a>.', 'warning');
   }
}

function randomString(length) {
   var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz'.split('');
   if (!length) {
      length = Math.floor(Math.random() * chars.length);
   }
   var str = '';
   for (var i = 0; i < length; i++) {
      str += chars[Math.floor(Math.random() * chars.length)];
   }
   var currentdate = new Date();
   var monthPass = currentdate.getMonth() + 1
   var datetime = "" + currentdate.getDate() + "" + monthPass + "" + currentdate.getFullYear() + "" + currentdate.getHours() + "" + currentdate.getMinutes() + "" + currentdate.getSeconds();
   var finalValue = str + '' + datetime;
   return finalValue;
}

function jawEngineShow() {
   $("#jawEngineDiv").slideToggle();
}
$('#isDropOffLocationPresent1').click(function () {
   if ($("#isDropOffLocationPresent1").is(":checked") == true) {
      $('#isDropOffLocationPresent1').val(true);
   } else {
      $('#isDropOffLocationPresent1').val(false);
   }
   $("#dropOffLocDiv").slideToggle();
})

function dropLocShow() {
   if ($("#isDropOffLocationPresent1").is(":checked") == true) {
      $('#isDropOffLocationPresent1').val(true);
      $('#isDropOffLocationPresent').val(true);
   } else {
      $('#isDropOffLocationPresent1').val(false);
      $('#isDropOffLocationPresent').val(false);
   }
   $("#dropOffLocDiv").slideToggle();
}

function advaOptionsShow() {
   $("#advaOptionsDiv").slideToggle();
}
$(document).ready(function () {
   var totpax = 1;
   var adult = $("#adult").val();
   var child = $("#child").val();
   var infant = $("#infant").val();
    //document.getElementById("quantity").value = adult;
       //document.getElementById("quantity1").value = child;
       //document.getElementById("quantity2").value =infant;
   totpax = parseInt(adult) + parseInt(child) + parseInt(infant);
   $("#personOuter").on('click', function () {
      $(".travelerdropdown").slideDown();
   });
   $(".travelerClose").on('click', function () {
      $(".travelerdropdown").slideUp();
   });
   $("#sub1plus").click(function () {
      var sv = $("#adult").val();
      if ((parseInt(sv) + 1) == 10) {
         return;
      }
      if ((parseInt(totpax)) >= 9) {
         return;
      }
      adult = parseInt(adult) + 1;
      totpax = parseInt(totpax) + 1;
      $("#adult").val(parseInt(sv) + 1);
   });
   $("#sub1minus").click(function () {
      var sv = $("#adult").val();
      if (parseInt(sv) != 0)
         if ((parseInt(sv)) <= 1) {
            return;
         }
      var sv2 = $("#infant").val();
      if (parseInt(sv2) > parseInt(sv - 1)) {
         totpax = parseInt(totpax) - 1;
         $("#infant").val(sv - 1);
      }
      adult = parseInt(adult) - 1;
      totpax = parseInt(totpax) - 1;
      $("#adult").val(parseInt(sv) - 1);
      if (parseInt($("#infant").val()) > parseInt($("#adult").val()) * 2) {
         var diff = ($("#adult").val() * 2) - $("#infant").val();
         $("#infant").val() = $("#adult").val() * 2;
         $("#infantWs").val(diff);
         totpax = parseInt(totpax) - diff;
      }
   });
   $("#sub2plus").click(function () {
      var sv = $("#child").val();
      if ((parseInt(sv) + 1) > 9) {
         return;
      }
      if ((parseInt(totpax)) >= 9) {
         return;
      }
      child = parseInt(child) + 1;
      totpax = parseInt(totpax) + 1;
      $("#child").val(parseInt(sv) + 1);
   });
   $("#sub2minus").click(function () {
      var sv = $("#child").val();
      if (sv <= 0) {
         return;
      }
      child = parseInt(child) - 1;
      totpax = parseInt(totpax) - 1;
      $("#child").val(parseInt(sv) - 1);
   });
   $("#sub3plus").click(function () {
      var infant = $("#infant").val();
      var adult = $("#adult").val();
      if ((infant) >= (adult * 2)) {
         return;
      }
      if ((parseInt(totpax)) >= 9) {
         return;
      }
      infant = parseInt(infant) + 1;
      totpax = parseInt(totpax) + 1;
      $("#infant").val(parseInt(infant));
   });
   $("#sub3minus").click(function () {
      var infant = $("#infant").val();
      var adult = $("#adult").val();
      if (infant <= 0) {
         return;
      }
      if (adult <= 0) {
         return;
      }
      infant = parseInt(infant) - 1;
      totpax = parseInt(totpax) - 1;
      $("#infant").val(parseInt(infant));
   });
    flightSearch
    $("#flightSearch").onload(function () {
      var sv = $("#adult").val();
      var sv1 = $("#child").val();
      var sv2 = $("#infant").val();
      var sv3 = $("#cabinClass option:selected").attr("name");
      var total = parseInt(sv) + parseInt(sv1) + parseInt(sv2);
      if (total > 1) {
         $("#person").val(total + " Travelers " + sv3);
      } else {
         $("#person").val(total + " Adult " + sv3);
      }
   });
   $(".maincalulation").click(function () {
      var sv = $("#adult").val();
      var sv1 = $("#child").val();
      var sv2 = $("#infant").val();
      var sv3 = $("#cabinClass option:selected").attr("name");
      var total = parseInt(sv) + parseInt(sv1) + parseInt(sv2);
      if (total > 1) {
         $("#person").val(total + " Travelers " + sv3);
      } else {
         $("#person").val(total + " Adult " + sv3);
      }
   });
    
   $('#cabinClass').on('change', function () {
      var sv = $("#adult").val();
      var sv1 = $("#child").val();
      var sv2 = $("#infant").val();
      var sv3 = $("#cabinClass").val();
      var total = parseInt(sv) + parseInt(sv1) + parseInt(sv2);
      if (total > 1) {
         $("#person").val(total + " Travelers ");
      } else {
         $("#person").val(total + " Adult ");
      }
   });
   $("#newsSignss").click(function () {
      var emailId = $("#newsEmail").val();
      if (emailId == '') {
         $("#submitSuccess").text("please enter emailId");
         return false;
      }
      ValidateEmail(emailId);
   });

   function ValidateEmail(mail) {
      var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
      if (mailformat.test(mail)) {
         $.ajax({
            url: '/farealert/signup',
            type: "POST",
            dataType: 'json',
            data: JSON.stringify({
               'emailId': mail,
               'alertType': 'NewsLetter'
            }),
            Accept: "application/json;charset=utf-8",
            contentType: "application/json; charset=utf-8",
            success: function (result) {
               $("#submitSuccess").text(result);
               $("#submitSuccess").show().delay(5000).fadeOut();
               $('#newsEmail').val('');
            },
            error: function (xhr, resp, text) {}
         })
      } else {
         $("#submitSuccess").text("please enter valid emailId");
         return false;
      }
   }
});

function clickEngineShow(id, tab) {
   $("#flightEngineId").hide();
   $("#hotelEngineId").hide();
   $("#carEngineId").hide();
   $("#activityEngineId").hide();
   $("#" + id).show();
   $(".cff-list-tab").removeClass("active");
   $("#" + tab).addClass('active');
   $("input").removeClass("error");
   $("span.error").css("display", "none");
}

function hotelTabClick() {
   $('.activityTab').removeClass('active');
   $('.carTab').removeClass('active');
   $('.flightTab').removeClass('active');
   $('.hotelTab').addClass('active');
   $("#flightEngineId").addClass('hide');
   $("#carEngineId").addClass('hide');
   $("#activityEngineId").addClass('hide');
   $("#hotelEngineId").removeClass('hide');
}

function flightTabClick() {
   $('.activityTab').removeClass('active');
   $('.carTab').removeClass('active');
   $('.hotelTab').removeClass('active');
   $('.flightTab').addClass('active');
   $("#hotelEngineId").addClass('hide');
   $("#carEngineId").addClass('hide');
   $("#activityEngineId").addClass('hide');
   $("#flightEngineId").removeClass('hide');
}

function carTabClick() {
   $('.activityTab').removeClass('active');
   $('.hotelTab').removeClass('active');
   $('.flightTab').removeClass('active');
   $('.carTab').addClass('active');
   $("#hotelEngineId").addClass('hide');
   $("#flightEngineId").addClass('hide');
   $("#activityEngineId").addClass('hide');
   $("#carEngineId").removeClass('hide');
   $("#pickTime").val("10:00");
   $("#dropTime").val("10:00");
}

function activityTabClick() {
   $('.carTab').removeClass('active');
   $('.hotelTab').removeClass('active');
   $('.flightTab').removeClass('active');
   $('.activityTab').addClass('active');
   $("#hotelEngineId").addClass('hide');
   $("#carEngineId").addClass('hide');
   $("#flightEngineId").addClass('hide');
   $("#activityEngineId").removeClass('hide');
}
$(document).ready(function () {
   $("#pickTime").val("10:00");
   $("#dropTime").val("10:00");
   $('#select_room').click(function () {
      $('.roomdrop').show();
   });
   $('.doneroom').click(function () {
      $('.roomdrop').hide();
   });
   $('#addRoomsTag').click(function () {
      var checkDisplay = 1;
      var totalPerson = 1;
      var room1Adult = $('#room1TextAdult').val();
      var room1Child = $('#room1TextChild').val();
      var room2Adult = $('#room2TextAdult').val();
      var room2Child = $('#room2TextChild').val();
      var room3Adult = $('#room3TextAdult').val();
      var room3Child = $('#room3TextChild').val();
      var room4Adult = $('#room4TextAdult').val();
      var room4Child = $('#room4TextChild').val();
      for (var i = 2; i <= 4; i++) {
         if (document.getElementById("divRoom" + i).style.display == 'none') {
            document.getElementById("divRoom" + i).style.display = 'block';
            checkDisplay = i;
            if (checkDisplay == 1) {
               totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child));
            }
            if (checkDisplay == 2) {
               totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child) + parseInt(room2Adult) + parseInt(room2Child));
            }
            if (checkDisplay == 3) {
               totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child) + parseInt(room2Adult) + parseInt(room2Child) + parseInt(room3Adult) + parseInt(room3Child));
            }
            if (checkDisplay == 4) {
               totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child) + parseInt(room2Adult) + parseInt(room2Child) + parseInt(room3Adult) + parseInt(room3Child) + parseInt(room4Adult) + parseInt(room4Child));
            }
            var _selectText = parseInt(checkDisplay) + ' Room ' + parseInt(totalPerson) + ' Person';
            $('#rooms').val(checkDisplay);
            $('#select_room').val(_selectText);
            break;
         }
      }
   });
   $('#removeRoomsTag').click(function () {
      var checkDisplay = 1;
      var totalPerson = 1;
      var room1Adult = $('#room1TextAdult').val();
      var room1Child = $('#room1TextChild').val();
      var room2Adult = $('#room2TextAdult').val();
      var room2Child = $('#room2TextChild').val();
      var room3Adult = $('#room3TextAdult').val();
      var room3Child = $('#room3TextChild').val();
      var room4Adult = $('#room4TextAdult').val();
      var room4Child = $('#room4TextChild').val();
      for (var i = 4; i >= 2; i--) {
         if (document.getElementById("divRoom" + i).style.display == 'block') {
            document.getElementById("divRoom" + i).style.display = 'none';
            checkDisplay = parseInt(i - 1);
            if (checkDisplay == 1) {
               totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child));
            }
            if (checkDisplay == 2) {
               totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child) + parseInt(room2Adult) + parseInt(room2Child));
            }
            if (checkDisplay == 3) {
               totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child) + parseInt(room2Adult) + parseInt(room2Child) + parseInt(room3Adult) + parseInt(room3Child));
            }
            if (checkDisplay == 4) {
               totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child) + parseInt(room2Adult) + parseInt(room2Child) + parseInt(room3Adult) + parseInt(room3Child) + parseInt(room4Adult) + parseInt(room4Child));
            }
            var _selectText = parseInt(checkDisplay) + ' Room ' + parseInt(totalPerson) + ' Person';
            $('#rooms').val(checkDisplay);
            $('#select_room').val(_selectText);
            break;
         }
      }
   });
   $('#room1AdultPlus').click(function () {
      var room1TextAdult = $('#room1TextAdult').val();
      if (room1TextAdult < 9) {
         $('#room1TextAdult').val(parseInt(room1TextAdult) + 1);
      } else {
         $('#room1AdultPlus').addClass('disableButton');
      }
   });
   $('#room1AdultMinus').click(function () {
      var room1TextAdult = $('#room1TextAdult').val();
      if (parseInt(room1TextAdult) != 1) {
         $('#room1TextAdult').val(parseInt(room1TextAdult) - 1);
      } else {
         $('#room1AdultMinus').addClass('disableButton');
      }
   });
   $('#room1ChildPlus').click(function () {
      var room1ChildText = $('#room1TextChild').val();
      if (room1ChildText < 4) {
         $('#room1TextChild').val(parseInt(room1ChildText) + 1);
      }
      var room1ChildText = $('#room1TextChild').val();
      if (parseInt(room1ChildText) > 0 && parseInt(room1ChildText) < 4) {
         $('#divRoom1ChildAges1').show();
         if (parseInt(room1ChildText) == 1) {
            $('#divRoom1Child1Age').show();
         }
         if (parseInt(room1ChildText) == 2) {
            $('#divRoom1Child1Age').show();
            $('#divRoom1Child2Age').show();
         }
         if (parseInt(room1ChildText) == 3) {
            $('#divRoom1Child1Age').show();
            $('#divRoom1Child2Age').show();
            $('#divRoom1Child3Age').show();
         }
      }
      if (parseInt(room1ChildText) > 3) {
         $('#divRoom1ChildAges2').show();
         $('#divRoom1Child1Age').show();
         $('#divRoom1Child2Age').show();
         $('#divRoom1Child3Age').show();
         $('#divRoom1Child4Age').show();
      }
   });
   $('#room1ChildMinus').click(function () {
      var room1ChildText = $('#room1TextChild').val();
      if (parseInt(room1ChildText) != 0) {
         $('#room1TextChild').val(parseInt(room1ChildText) - 1);
      }
      room1ChildText = $('#room1TextChild').val();
      if (parseInt(room1ChildText) == 3) {
         $('#divRoom1ChildAges2').hide();
         $('#divRoom1Child4Age').hide();
      }
      if (parseInt(room1ChildText) == 2) {
         $('#divRoom1ChildAges2').hide();
         $('#divRoom1Child4Age').hide();
         $('#divRoom1Child3Age').hide();
      }
      if (parseInt(room1ChildText) == 1) {
         $('#divRoom1ChildAges2').hide();
         $('#divRoom1Child4Age').hide();
         $('#divRoom1Child3Age').hide();
         $('#divRoom1Child2Age').hide();
      }
      if (parseInt(room1ChildText) == 0) {
         $('#divRoom1ChildAges2').hide();
         $('#divRoom1Child4Age').hide();
         $('#divRoom1Child3Age').hide();
         $('#divRoom1Child2Age').hide();
         $('#divRoom1ChildAges1').hide();
         $('#divRoom1Child1Age').hide();
      }
   });
   $('#room1Child1AgePlus').click(function () {
      var room1TextChild1Age = $('#room1TextChild1Age').val();
      if (room1TextChild1Age < 17) {
         $('#room1TextChild1Age').val(parseInt(room1TextChild1Age) + 1);
      }
   });
   $('#room1Child1AgeMinus').click(function () {
      var room1TextChild1Age = $('#room1TextChild1Age').val();
      if (parseInt(room1TextChild1Age) != 1) {
         $('#room1TextChild1Age').val(parseInt(room1TextChild1Age) - 1);
      }
   });
   $('#room1Child2AgePlus').click(function () {
      var room1TextChild2Age = $('#room1TextChild2Age').val();
      if (room1TextChild2Age < 17) {
         $('#room1TextChild2Age').val(parseInt(room1TextChild2Age) + 1);
      }
   });
   $('#room1Child2AgeMinus').click(function () {
      var room1TextChild2Age = $('#room1TextChild2Age').val();
      if (parseInt(room1TextChild2Age) != 1) {
         $('#room1TextChild2Age').val(parseInt(room1TextChild2Age) - 1);
      }
   });
   $('#room1Child3AgePlus').click(function () {
      var room1TextChild2Age = $('#room1TextChild3Age').val();
      if (room1TextChild2Age < 17) {
         $('#room1TextChild3Age').val(parseInt(room1TextChild2Age) + 1);
      }
   });
   $('#room1Child3AgeMinus').click(function () {
      var room1TextChild2Age = $('#room1TextChild3Age').val();
      if (parseInt(room1TextChild2Age) != 1) {
         $('#room1TextChild3Age').val(parseInt(room1TextChild2Age) - 1);
      }
   });
   $('#room1Child4AgePlus').click(function () {
      var room1TextChild2Age = $('#room1TextChild4Age').val();
      if (room1TextChild2Age < 17) {
         $('#room1TextChild4Age').val(parseInt(room1TextChild2Age) + 1);
      }
   });
   $('#room1Child4AgeMinus').click(function () {
      var room1TextChild2Age = $('#room1TextChild4Age').val();
      if (parseInt(room1TextChild2Age) != 1) {
         $('#room1TextChild4Age').val(parseInt(room1TextChild2Age) - 1);
      }
   });
   $('#room2AdultPlus').click(function () {
      var room2TextAdult = $('#room2TextAdult').val();
      if (room2TextAdult < 9) {
         $('#room2TextAdult').val(parseInt(room2TextAdult) + 1);
      } else {
         $('#room2AdultPlus').addClass('disableButton');
      }
   });
   $('#room2AdultMinus').click(function () {
      var room2TextAdult = $('#room2TextAdult').val();
      if (parseInt(room2TextAdult) != 1) {
         $('#room2TextAdult').val(parseInt(room2TextAdult) - 1);
      } else {
         $('#room2AdultMinus').addClass('disableButton');
      }
   });
   $('#room2ChildPlus').click(function () {
      var room2ChildText = $('#room2TextChild').val();
      if (room2ChildText < 4) {
         $('#room2TextChild').val(parseInt(room2ChildText) + 1);
      }
      var room2ChildText = $('#room2TextChild').val();
      if (parseInt(room2ChildText) > 0 && parseInt(room2ChildText) < 4) {
         $('#divroom2ChildAges1').show();
         if (parseInt(room2ChildText) == 1) {
            $('#divroom2Child1Age').show();
         }
         if (parseInt(room2ChildText) == 2) {
            $('#divroom2Child1Age').show();
            $('#divroom2Child2Age').show();
         }
         if (parseInt(room2ChildText) == 3) {
            $('#divroom2Child1Age').show();
            $('#divroom2Child2Age').show();
            $('#divroom2Child3Age').show();
         }
      }
      if (parseInt(room2ChildText) > 3) {
         $('#divroom2ChildAges2').show();
         $('#divroom2Child1Age').show();
         $('#divroom2Child2Age').show();
         $('#divroom2Child3Age').show();
         $('#divroom2Child4Age').show();
      }
   });
   $('#room2ChildMinus').click(function () {
      var room2ChildText = $('#room2TextChild').val();
      if (parseInt(room2ChildText) != 0) {
         $('#room2TextChild').val(parseInt(room2ChildText) - 1);
      }
      room2ChildText = $('#room2TextChild').val();
      if (parseInt(room2ChildText) == 3) {
         $('#divroom2ChildAges2').hide();
         $('#divroom2Child4Age').hide();
      }
      if (parseInt(room2ChildText) == 2) {
         $('#divroom2ChildAges2').hide();
         $('#divroom2Child4Age').hide();
         $('#divroom2Child3Age').hide();
      }
      if (parseInt(room2ChildText) == 1) {
         $('#divroom2ChildAges2').hide();
         $('#divroom2Child4Age').hide();
         $('#divroom2Child3Age').hide();
         $('#divroom2Child2Age').hide();
      }
      if (parseInt(room2ChildText) == 0) {
         $('#divroom2ChildAges2').hide();
         $('#divroom2Child4Age').hide();
         $('#divroom2Child3Age').hide();
         $('#divroom2Child2Age').hide();
         $('#divroom2ChildAges1').hide();
         $('#divroom2Child1Age').hide();
      }
   });
   $('#room2Child1AgePlus').click(function () {
      var room2TextChild1Age = $('#room2TextChild1Age').val();
      if (room2TextChild1Age < 17) {
         $('#room2TextChild1Age').val(parseInt(room2TextChild1Age) + 1);
      }
   });
   $('#room2Child1AgeMinus').click(function () {
      var room2TextChild1Age = $('#room2TextChild1Age').val();
      if (parseInt(room2TextChild1Age) != 1) {
         $('#room2TextChild1Age').val(parseInt(room2TextChild1Age) - 1);
      }
   });
   $('#room2Child2AgePlus').click(function () {
      var room2TextChild2Age = $('#room2TextChild2Age').val();
      if (room2TextChild2Age < 17) {
         $('#room2TextChild2Age').val(parseInt(room2TextChild2Age) + 1);
      }
   });
   $('#room2Child2AgeMinus').click(function () {
      var room2TextChild2Age = $('#room2TextChild2Age').val();
      if (parseInt(room2TextChild2Age) != 1) {
         $('#room2TextChild2Age').val(parseInt(room2TextChild2Age) - 1);
      }
   });
   $('#room2Child3AgePlus').click(function () {
      var room2TextChild2Age = $('#room2TextChild3Age').val();
      if (room2TextChild2Age < 17) {
         $('#room2TextChild3Age').val(parseInt(room2TextChild2Age) + 1);
      }
   });
   $('#room2Child3AgeMinus').click(function () {
      var room2TextChild2Age = $('#room2TextChild3Age').val();
      if (parseInt(room2TextChild2Age) != 1) {
         $('#room2TextChild3Age').val(parseInt(room2TextChild2Age) - 1);
      }
   });
   $('#room2Child4AgePlus').click(function () {
      var room2TextChild2Age = $('#room2TextChild4Age').val();
      if (room2TextChild2Age < 17) {
         $('#room2TextChild4Age').val(parseInt(room2TextChild2Age) + 1);
      }
   });
   $('#room2Child4AgeMinus').click(function () {
      var room2TextChild2Age = $('#room2TextChild4Age').val();
      if (parseInt(room2TextChild2Age) != 1) {
         $('#room2TextChild4Age').val(parseInt(room2TextChild2Age) - 1);
      }
   });
   $('#room3AdultPlus').click(function () {
      var room3TextAdult = $('#room3TextAdult').val();
      if (room3TextAdult < 9) {
         $('#room3TextAdult').val(parseInt(room3TextAdult) + 1);
      } else {
         $('#room3AdultPlus').addClass('disableButton');
      }
   });
   $('#room3AdultMinus').click(function () {
      var room3TextAdult = $('#room3TextAdult').val();
      if (parseInt(room3TextAdult) != 1) {
         $('#room3TextAdult').val(parseInt(room3TextAdult) - 1);
      } else {
         $('#room3AdultMinus').addClass('disableButton');
      }
   });
   $('#room3ChildPlus').click(function () {
      var room3ChildText = $('#room3TextChild').val();
      if (room3ChildText < 4) {
         $('#room3TextChild').val(parseInt(room3ChildText) + 1);
      }
      var room3ChildText = $('#room3TextChild').val();
      if (parseInt(room3ChildText) > 0 && parseInt(room3ChildText) < 4) {
         $('#divroom3ChildAges1').show();
         if (parseInt(room3ChildText) == 1) {
            $('#divroom3Child1Age').show();
         }
         if (parseInt(room3ChildText) == 2) {
            $('#divroom3Child1Age').show();
            $('#divroom3Child2Age').show();
         }
         if (parseInt(room3ChildText) == 3) {
            $('#divroom3Child1Age').show();
            $('#divroom3Child2Age').show();
            $('#divroom3Child3Age').show();
         }
      }
      if (parseInt(room3ChildText) > 3) {
         $('#divroom3ChildAges2').show();
         $('#divroom3Child1Age').show();
         $('#divroom3Child2Age').show();
         $('#divroom3Child3Age').show();
         $('#divroom3Child4Age').show();
      }
   });
   $('#room3ChildMinus').click(function () {
      var room3ChildText = $('#room3TextChild').val();
      if (parseInt(room3ChildText) != 0) {
         $('#room3TextChild').val(parseInt(room3ChildText) - 1);
      }
      room3ChildText = $('#room3TextChild').val();
      if (parseInt(room3ChildText) == 3) {
         $('#divroom3ChildAges2').hide();
         $('#divroom3Child4Age').hide();
      }
      if (parseInt(room3ChildText) == 2) {
         $('#divroom3ChildAges2').hide();
         $('#divroom3Child4Age').hide();
         $('#divroom3Child3Age').hide();
      }
      if (parseInt(room3ChildText) == 1) {
         $('#divroom3ChildAges2').hide();
         $('#divroom3Child4Age').hide();
         $('#divroom3Child3Age').hide();
         $('#divroom3Child2Age').hide();
      }
      if (parseInt(room3ChildText) == 0) {
         $('#divroom3ChildAges2').hide();
         $('#divroom3Child4Age').hide();
         $('#divroom3Child3Age').hide();
         $('#divroom3Child2Age').hide();
         $('#divroom3ChildAges1').hide();
         $('#divroom3Child1Age').hide();
      }
   });
   $('#room3Child1AgePlus').click(function () {
      var room3TextChild1Age = $('#room3TextChild1Age').val();
      if (room3TextChild1Age < 17) {
         $('#room3TextChild1Age').val(parseInt(room3TextChild1Age) + 1);
      }
   });
   $('#room3Child1AgeMinus').click(function () {
      var room3TextChild1Age = $('#room3TextChild1Age').val();
      if (parseInt(room3TextChild1Age) != 1) {
         $('#room3TextChild1Age').val(parseInt(room3TextChild1Age) - 1);
      }
   });
   $('#room3Child2AgePlus').click(function () {
      var room3TextChild2Age = $('#room3TextChild2Age').val();
      if (room3TextChild2Age < 17) {
         $('#room3TextChild2Age').val(parseInt(room3TextChild2Age) + 1);
      }
   });
   $('#room3Child2AgeMinus').click(function () {
      var room3TextChild2Age = $('#room3TextChild2Age').val();
      if (parseInt(room3TextChild2Age) != 1) {
         $('#room3TextChild2Age').val(parseInt(room3TextChild2Age) - 1);
      }
   });
   $('#room3Child3AgePlus').click(function () {
      var room3TextChild2Age = $('#room3TextChild3Age').val();
      if (room3TextChild2Age < 17) {
         $('#room3TextChild3Age').val(parseInt(room3TextChild2Age) + 1);
      }
   });
   $('#room3Child3AgeMinus').click(function () {
      var room3TextChild2Age = $('#room3TextChild3Age').val();
      if (parseInt(room3TextChild2Age) != 1) {
         $('#room3TextChild3Age').val(parseInt(room3TextChild2Age) - 1);
      }
   });
   $('#room3Child4AgePlus').click(function () {
      var room3TextChild2Age = $('#room3TextChild4Age').val();
      if (room3TextChild2Age < 17) {
         $('#room3TextChild4Age').val(parseInt(room3TextChild2Age) + 1);
      }
   });
   $('#room3Child4AgeMinus').click(function () {
      var room3TextChild2Age = $('#room3TextChild4Age').val();
      if (parseInt(room3TextChild2Age) != 1) {
         $('#room3TextChild4Age').val(parseInt(room3TextChild2Age) - 1);
      }
   });
   $('#room4AdultPlus').click(function () {
      var room4TextAdult = $('#room4TextAdult').val();
      if (room4TextAdult < 9) {
         $('#room4TextAdult').val(parseInt(room4TextAdult) + 1);
      } else {
         $('#room4AdultPlus').addClass('disableButton');
      }
   });
   $('#room4AdultMinus').click(function () {
      var room4TextAdult = $('#room4TextAdult').val();
      if (parseInt(room4TextAdult) != 1) {
         $('#room4TextAdult').val(parseInt(room4TextAdult) - 1);
      } else {
         $('#room4AdultMinus').addClass('disableButton');
      }
   });
   $('#room4ChildPlus').click(function () {
      var room4ChildText = $('#room4TextChild').val();
      if (room4ChildText < 4) {
         $('#room4TextChild').val(parseInt(room4ChildText) + 1);
      }
      var room4ChildText = $('#room4TextChild').val();
      if (parseInt(room4ChildText) > 0 && parseInt(room4ChildText) < 4) {
         $('#divroom4ChildAges1').show();
         if (parseInt(room4ChildText) == 1) {
            $('#divroom4Child1Age').show();
         }
         if (parseInt(room4ChildText) == 2) {
            $('#divroom4Child1Age').show();
            $('#divroom4Child2Age').show();
         }
         if (parseInt(room4ChildText) == 3) {
            $('#divroom4Child1Age').show();
            $('#divroom4Child2Age').show();
            $('#divroom4Child3Age').show();
         }
      }
      if (parseInt(room4ChildText) > 3) {
         $('#divroom4ChildAges2').show();
         $('#divroom4Child1Age').show();
         $('#divroom4Child2Age').show();
         $('#divroom4Child3Age').show();
         $('#divroom4Child4Age').show();
      }
   });
   $('#room4ChildMinus').click(function () {
      var room4ChildText = $('#room4TextChild').val();
      if (parseInt(room4ChildText) != 0) {
         $('#room4TextChild').val(parseInt(room4ChildText) - 1);
      }
      room4ChildText = $('#room4TextChild').val();
      if (parseInt(room4ChildText) == 3) {
         $('#divroom4ChildAges2').hide();
         $('#divroom4Child4Age').hide();
      }
      if (parseInt(room4ChildText) == 2) {
         $('#divroom4ChildAges2').hide();
         $('#divroom4Child4Age').hide();
         $('#divroom4Child3Age').hide();
      }
      if (parseInt(room4ChildText) == 1) {
         $('#divroom4ChildAges2').hide();
         $('#divroom4Child4Age').hide();
         $('#divroom4Child3Age').hide();
         $('#divroom4Child2Age').hide();
      }
      if (parseInt(room4ChildText) == 0) {
         $('#divroom4ChildAges2').hide();
         $('#divroom4Child4Age').hide();
         $('#divroom4Child3Age').hide();
         $('#divroom4Child2Age').hide();
         $('#divroom4ChildAges1').hide();
         $('#divroom4Child1Age').hide();
      }
   });
   $('#room4Child1AgePlus').click(function () {
      var room4TextChild1Age = $('#room4TextChild1Age').val();
      if (room4TextChild1Age < 17) {
         $('#room4TextChild1Age').val(parseInt(room4TextChild1Age) + 1);
      }
   });
   $('#room4Child1AgeMinus').click(function () {
      var room4TextChild1Age = $('#room4TextChild1Age').val();
      if (parseInt(room4TextChild1Age) != 1) {
         $('#room4TextChild1Age').val(parseInt(room4TextChild1Age) - 1);
      }
   });
   $('#room4Child2AgePlus').click(function () {
      var room4TextChild2Age = $('#room4TextChild2Age').val();
      if (room4TextChild2Age < 17) {
         $('#room4TextChild2Age').val(parseInt(room4TextChild2Age) + 1);
      }
   });
   $('#room4Child2AgeMinus').click(function () {
      var room4TextChild2Age = $('#room4TextChild2Age').val();
      if (parseInt(room4TextChild2Age) != 1) {
         $('#room4TextChild2Age').val(parseInt(room4TextChild2Age) - 1);
      }
   });
   $('#room4Child3AgePlus').click(function () {
      var room4TextChild2Age = $('#room4TextChild3Age').val();
      if (room4TextChild2Age < 17) {
         $('#room4TextChild3Age').val(parseInt(room4TextChild2Age) + 1);
      }
   });
   $('#room4Child3AgeMinus').click(function () {
      var room4TextChild2Age = $('#room4TextChild3Age').val();
      if (parseInt(room4TextChild2Age) != 1) {
         $('#room4TextChild3Age').val(parseInt(room4TextChild2Age) - 1);
      }
   });
   $('#room4Child4AgePlus').click(function () {
      var room4TextChild2Age = $('#room4TextChild4Age').val();
      if (room4TextChild2Age < 17) {
         $('#room4TextChild4Age').val(parseInt(room4TextChild2Age) + 1);
      }
   });
   $('#room4Child4AgeMinus').click(function () {
      var room4TextChild2Age = $('#room4TextChild4Age').val();
      if (parseInt(room4TextChild2Age) != 1) {
         $('#room4TextChild4Age').val(parseInt(room4TextChild2Age) - 1);
      }
   });
   $('#roomSelectionDon').click(function () {
      var checkDisplay = 1;
      var totalPerson = 1;
      var totalAdult = 1;
      var totalChild = 1;
      for (var i = 1; i < 5; i++) {
         if (document.getElementById("divRoom" + i).style.display == 'block') {
            checkDisplay = i;
            $('#hdnroomNumber').val(parseInt(checkDisplay));
         }
      }
      var room1Adult = $('#room1TextAdult').val();
      var room1Child = $('#room1TextChild').val();
      var room2Adult = $('#room2TextAdult').val();
      var room2Child = $('#room2TextChild').val();
      var room3Adult = $('#room3TextAdult').val();
      var room3Child = $('#room3TextChild').val();
      var room4Adult = $('#room4TextAdult').val();
      var room4Child = $('#room4TextChild').val();
      if (checkDisplay == 1) {
         totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child));
         $('#hdnroom1Adult').val(parseInt(room1Adult));
         $('#hdnroom1Child').val(parseInt(room1Child));
         totalAdult = parseInt(room1Adult);
         totalChild = parseInt(room1Child);
         var room1TextChild = $('#room1TextChild').val();
         room1TextChild = parseInt(room1TextChild);
         for (var i = 1; i <= room1TextChild; i++) {
            var hdnId = '#hdnroom1Child' + i + 'Age';
            var textId = '#room1TextChild' + i + 'Age';
            $(hdnId).val($(textId).val());
         }
      }
      if (checkDisplay == 2) {
         totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child) + parseInt(room2Adult) + parseInt(room2Child));
         $('#hdnroom1Adult').val(parseInt(room1Adult));
         $('#hdnroom1Child').val(parseInt(room1Child));
         $('#hdnroom2Adult').val(parseInt(room2Adult));
         $('#hdnroom2Child').val(parseInt(room2Child));
         totalAdult = parseInt(parseInt(room1Adult) + parseInt(room2Adult));
         totalChild = parseInt(parseInt(room1Child) + parseInt(room2Child));
         var room1TextChild = $('#room1TextChild').val();
         room1TextChild = parseInt(room1TextChild);
         for (var i = 1; i <= room1TextChild; i++) {
            var hdnId = '#hdnroom1Child' + i + 'Age';
            var textId = '#room1TextChild' + i + 'Age';
            $(hdnId).val($(textId).val());
         }
         var room2TextChild = $('#room2TextChild').val();
         room2TextChild = parseInt(room2TextChild);
         for (var i = 1; i <= room2TextChild; i++) {
            var hdnId = '#hdnroom2Child' + i + 'Age';
            var textId = '#room2TextChild' + i + 'Age';
            $(hdnId).val($(textId).val());
         }
      }
      if (checkDisplay == 3) {
         totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child) + parseInt(room2Adult) + parseInt(room2Child) + parseInt(room3Adult) + parseInt(room3Child));
         $('#hdnroom1Adult').val(parseInt(room1Adult));
         $('#hdnroom1Child').val(parseInt(room1Child));
         $('#hdnroom2Adult').val(parseInt(room2Adult));
         $('#hdnroom2Child').val(parseInt(room2Child));
         $('#hdnroom3Adult').val(parseInt(room3Adult));
         $('#hdnroom3Child').val(parseInt(room3Child));
         totalAdult = parseInt(parseInt(room1Adult) + parseInt(room2Adult) + parseInt(room3Adult));
         totalChild = parseInt(parseInt(room1Child) + parseInt(room2Child) + parseInt(room3Child));
         var room1TextChild = $('#room1TextChild').val();
         room1TextChild = parseInt(room1TextChild);
         for (var i = 1; i <= room1TextChild; i++) {
            var hdnId = '#hdnroom1Child' + i + 'Age';
            var textId = '#room1TextChild' + i + 'Age';
            $(hdnId).val($(textId).val());
         }
         var room2TextChild = $('#room2TextChild').val();
         room2TextChild = parseInt(room2TextChild);
         for (var i = 1; i <= room2TextChild; i++) {
            var hdnId = '#hdnroom2Child' + i + 'Age';
            var textId = '#room2TextChild' + i + 'Age';
            $(hdnId).val($(textId).val());
         }
         var room3TextChild = $('#room3TextChild').val();
         room3TextChild = parseInt(room3TextChild);
         for (var i = 1; i <= room3TextChild; i++) {
            var hdnId = '#hdnroom3Child' + i + 'Age';
            var textId = '#room3TextChild' + i + 'Age';
            $(hdnId).val($(textId).val());
         }
      }
      if (checkDisplay == 4) {
         totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child) + parseInt(room2Adult) + parseInt(room2Child) + parseInt(room3Adult) + parseInt(room3Child) + parseInt(room4Adult) + parseInt(room4Child));
         $('#hdnroom1Adult').val(parseInt(room1Adult));
         $('#hdnroom1Child').val(parseInt(room1Child));
         $('#hdnroom2Adult').val(parseInt(room2Adult));
         $('#hdnroom2Child').val(parseInt(room2Child));
         $('#hdnroom3Adult').val(parseInt(room3Adult));
         $('#hdnroom3Child').val(parseInt(room3Child));
         $('#hdnroom4Adult').val(parseInt(room4Adult));
         $('#hdnroom4Child').val(parseInt(room4Child));
         totalAdult = parseInt(parseInt(room1Adult) + parseInt(room2Adult) + parseInt(room3Adult) + parseInt(room4Adult));
         totalChild = parseInt(parseInt(room1Child) + parseInt(room2Child) + parseInt(room3Child) + parseInt(room4Child));
         var room1TextChild = $('#room1TextChild').val();
         room1TextChild = parseInt(room1TextChild);
         for (var i = 1; i <= room1TextChild; i++) {
            var hdnId = '#hdnroom1Child' + i + 'Age';
            var textId = '#room1TextChild' + i + 'Age';
            $(hdnId).val($(textId).val());
         }
         var room2TextChild = $('#room2TextChild').val();
         room2TextChild = parseInt(room2TextChild);
         for (var i = 1; i <= room2TextChild; i++) {
            var hdnId = '#hdnroom2Child' + i + 'Age';
            var textId = '#room2TextChild' + i + 'Age';
            $(hdnId).val($(textId).val());
         }
         var room3TextChild = $('#room3TextChild').val();
         room3TextChild = parseInt(room3TextChild);
         for (var i = 1; i <= room3TextChild; i++) {
            var hdnId = '#hdnroom3Child' + i + 'Age';
            var textId = '#room3TextChild' + i + 'Age';
            $(hdnId).val($(textId).val());
         }
         var room4TextChild = $('#room4TextChild').val();
         room4TextChild = parseInt(room4TextChild);
         for (var i = 1; i <= room4TextChild; i++) {
            var hdnId = '#hdnroom4Child' + i + 'Age';
            var textId = '#room4TextChild' + i + 'Age';
            $(hdnId).val($(textId).val());
         }
      }
      $('#hdtotalAdult').val(totalAdult);
      $('#hdtotalChild').val(totalChild);
      var _selectText = parseInt(checkDisplay) + ' Room ' + parseInt(totalPerson) + ' Person';
   });
   $('.roomsNoCalculation').click(function () {
      var checkDisplay = 1;
      var totalPerson = 1;
      for (var i = 1; i < 5; i++) {
         if (document.getElementById("divRoom" + i).style.display == 'block') {
            checkDisplay = i;
         }
      }
      var room1Adult = $('#room1TextAdult').val();
      var room1Child = $('#room1TextChild').val();
      var room2Adult = $('#room2TextAdult').val();
      var room2Child = $('#room2TextChild').val();
      var room3Adult = $('#room3TextAdult').val();
      var room3Child = $('#room3TextChild').val();
      var room4Adult = $('#room4TextAdult').val();
      var room4Child = $('#room4TextChild').val();
      if (checkDisplay == 1) {
         totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child));
      }
      if (checkDisplay == 2) {
         totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child) + parseInt(room2Adult) + parseInt(room2Child));
      }
      if (checkDisplay == 3) {
         totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child) + parseInt(room2Adult) + parseInt(room2Child) + parseInt(room3Adult) + parseInt(room3Child));
      }
      if (checkDisplay == 4) {
         totalPerson = parseInt(parseInt(room1Adult) + parseInt(room1Child) + parseInt(room2Adult) + parseInt(room2Child) + parseInt(room3Adult) + parseInt(room3Child) + parseInt(room4Adult) + parseInt(room4Child));
      }
      var _selectText = parseInt(checkDisplay) + ' Room ' + parseInt(totalPerson) + ' Person';
      $('#select_room').val(_selectText);
   });
});
$(document).ready(function () {
   room_form_index = $("#rooms").val();
   removeFun(room_form_index - 1);
   var room_form_index_new = 0;
   var chAge = 0;
   $("#addroom").click(function () {
      room_form_index = $("#rooms").val();
      removeFun(room_form_index);
      if (room_form_index < 5) {
         var cust_indexs = room_form_index;
         var row_index = room_form_index;
         if (row_index > 0) {
            var cust_index = Number(room_form_index);
            $('#cust' + (Number(cust_index) - 1)).after($("#cust" + (Number(cust_index) - 1)).clone().attr("id", "cust" + cust_index));
            $("#cust" + cust_index).find("#roomNo0").attr("id", "roomNo" + (cust_index));
            $("#cust" + cust_index + " select").each(function () {
               if (this.id.indexOf('adults') != -1) {
                  $(this).attr("name", "rooms[" + cust_index + "].adults");
                  $(this).attr("id", "rooms" + cust_index + "adults");
               } else if (this.id.indexOf('children') != -1) {
                  $(this).attr("name", "rooms[" + cust_index + "].children[" + chAge + "].age");
                  $(this).attr("id", "rooms" + cust_index + "children[" + chAge + "].age");
                  chAge = chAge + 1;
               } else {
                  $(this).attr("name", "rooms[" + cust_index + "].child");
                  $(this).attr("id", "rooms" + cust_index + "child");
               }
            });
            $("#cust" + cust_index).find(".right").attr("id", "childAge" + cust_index);
            $("#childAge" + cust_index).find("#age" + (cust_index - 1)).attr("id", "age" + (cust_index));
            $("#childAge" + cust_index).find("#" + (cust_index - 1) + "0").attr("id", "" + (cust_index) + "0");
            $("#childAge" + cust_index).find("#" + (cust_index - 1) + "1").attr("id", "" + (cust_index) + "1");
            $("#childAge" + cust_index).find("#" + (cust_index - 1) + "2").attr("id", "" + (cust_index) + "2");
            $("#childAge" + cust_index).find("#" + (cust_index - 1) + "3").attr("id", "" + (cust_index) + "3");
            $("#childAge" + cust_index).find("#" + (cust_index - 1) + "4").attr("id", "" + (cust_index) + "4");
            $("#age" + cust_index).css("display", "none");
            $("#childAge" + cust_index).css("display", "inline");
            var chAge = 0;
            $("#childAge" + cust_index + " select").each(function () {
               $(this).attr("name", "rooms[" + cust_index + "].children[" + chAge + "].age");
               $(this).attr("id", "rooms" + cust_index + "children[" + chAge + "].age");
               $(this).val(1);
               chAge = chAge + 1;
            });
            room_form_index = Number(1) + Number(room_form_index);
            $("#rooms").val(room_form_index);
         } else {
            row_index = room_form_index - cust_indexs;
            for (i = 1; i <= row_index; i++) {
               room_form_index = room_form_index - 1;
               $("#cust" + room_form_index).remove();
               $("#childAge" + room_form_index).remove();
            }
         }
         var room = $("#rooms").val();
         var adult = $('#roomsadults option:selected').val();
         var child = $("#rooms0child :selected").text();
         $("#rooms" + (Number(room) - 1) + "adults").val(1);
         $("#rooms" + (Number(room) - 1) + "child").val(0);
         addAgeOnLoad(0, (Number(room) - 1));
         if ($('#rooms1adults').length && $('#rooms1adults').val().length) {
            var adult1 = $("#rooms1adults").val();
            var child1 = $("#rooms1child").val();
            adult = parseInt(adult) + parseInt(adult1);
            child = parseInt(child) + parseInt(child1);
         }
         if ($('#rooms2adults').length && $('#rooms2adults').val().length) {
            var adult2 = $("#rooms2adults").val();
            var child2 = $("#rooms2child").val();
            adult = parseInt(adult) + parseInt(adult2);
            child = parseInt(child) + parseInt(child2);
         }
         if ($('#rooms3adults').length && $('#rooms3adults').val().length) {
            var adult3 = $("#rooms3adults").val();
            var child3 = $("#rooms3child").val();
            adult = parseInt(adult) + parseInt(adult3);
            child = parseInt(child) + parseInt(child3);
         }
         if ($('#rooms4adults').length && $('#rooms4adults').val().length) {
            var adult4 = $("#rooms4adults").val();
            var child4 = $("#rooms4child").val();
            adult = parseInt(adult) + parseInt(adult4);
            child = parseInt(child) + parseInt(child4);
         }
         var text = "";
         if (room == 1) {
            text = text + "1 Room,";
         } else {
            text = text + room + " Rooms,";
         }
         if (adult == 1) {
            text = text + "1 Adult,";
         } else {
            text = text + adult + " Adults,";
         }
         if (child == 0) {
            text = text + "0 Child";
         } else if (child == 1) {
            text = text + child + " Child";
         } else {
            text = text + child + " Children";
         }
         $("#guestform").val(text);
      }
   });
   $("#removeroom").click(function () {
      room_form_index = $("#rooms").val();
      if (room_form_index > 1) {
         $("#cust" + (Number(room_form_index) - 1)).remove();
         $("#childAge" + (Number(room_form_index) - 1)).remove();
         room_form_index = Number(room_form_index) - Number(1);
         $("#rooms").val(room_form_index);
         var room = $("#rooms").val();
         var adult = $('#roomsadults option:selected').val();
         var child = $("#rooms0child :selected").text();
         if ($('#rooms1adults').length && $('#rooms1adults').val().length) {
            var adult1 = $("#rooms1adults").val();
            var child1 = $("#rooms1child").val();
            adult = parseInt(adult) + parseInt(adult1);
            child = parseInt(child) + parseInt(child1);
         }
         if ($('#rooms2adults').length && $('#rooms2adults').val().length) {
            var adult2 = $("#rooms2adults").val();
            var child2 = $("#rooms2child").val();
            adult = parseInt(adult) + parseInt(adult2);
            child = parseInt(child) + parseInt(child2);
         }
         if ($('#rooms3adults').length && $('#rooms3adults').val().length) {
            var adult3 = $("#rooms3adults").val();
            var child3 = $("#rooms3child").val();
            adult = parseInt(adult) + parseInt(adult3);
            child = parseInt(child) + parseInt(child3);
         }
         if ($('#rooms4adults').length && $('#rooms4adults').val().length) {
            var adult4 = $("#rooms4adults").val();
            var child4 = $("#rooms4child").val();
            adult = parseInt(adult) + parseInt(adult4);
            child = parseInt(child) + parseInt(child4);
         }
         var text = "";
         if (room == 1) {
            text = text + "1 Room,";
         } else {
            text = text + room + " Rooms,";
         }
         if (adult == 1) {
            text = text + "1 Adult,";
         } else {
            text = text + adult + " Adults,";
         }
         if (child == 0) {
            text = text + "0 Child";
         } else if (child == 1) {
            text = text + child + " Child";
         } else {
            text = text + child + " Children";
         }
         $("#guestform").val(text);
      }
      removeFun(room_form_index - 1);
   });
});

function addAge(kk) {
   var childNo = kk.value;
   var str2 = kk.id.replace(/[^\d.]/g, '');
   var room = parseInt(str2);
   $("#age" + room).css({
      display: "block"
   });
   if (childNo == 0) {
      $("#age" + room).css({
         display: "none"
      });
   }
   for (i = 0; i < 5; i++) {
      $("#" + room + i).css({
         display: "none"
      });
   }
   for (i = 0; i < childNo; i++) {
      $("#" + room + i).css({
         display: "block"
      });
   }
   var room = $("#rooms").val();
   var adult = $('#roomsadults option:selected').val();
   var child = $("#rooms0child :selected").text();
   if ($('#rooms1adults').length && $('#rooms1adults').val().length) {
      var adult1 = $("#rooms1adults").val();
      var child1 = $("#rooms1child").val();
      adult = parseInt(adult) + parseInt(adult1);
      child = parseInt(child) + parseInt(child1);
   }
   if ($('#rooms2adults').length && $('#rooms2adults').val().length) {
      var adult2 = $("#rooms2adults").val();
      var child2 = $("#rooms2child").val();
      adult = parseInt(adult) + parseInt(adult2);
      child = parseInt(child) + parseInt(child2);
   }
   if ($('#rooms3adults').length && $('#rooms3adults').val().length) {
      var adult3 = $("#rooms3adults").val();
      var child3 = $("#rooms3child").val();
      adult = parseInt(adult) + parseInt(adult3);
      child = parseInt(child) + parseInt(child3);
   }
   if ($('#rooms4adults').length && $('#rooms4adults').val().length) {
      var adult4 = $("#rooms4adults").val();
      var child4 = $("#rooms4child").val();
      adult = parseInt(adult) + parseInt(adult4);
      child = parseInt(child) + parseInt(child4);
   }
   var text = "";
   if (room == 1) {
      text = text + "1 Room,";
   } else {
      text = text + room + " Rooms,";
   }
   if (adult == 1) {
      text = text + "1 Adult,";
   } else {
      text = text + adult + " Adults,";
   }
   if (child == 0) {
      text = text + "0 Child";
   } else if (child == 1) {
      text = text + child + " Child";
   } else {
      text = text + child + " Children";
   }
   $("#guestform").val(text);
}

function addAgeOnLoad(kk, pp) {
   var childNo = kk;
   var room = pp;
   $("#age" + room).css({
      display: "block"
   });
   if (childNo == 0) {
      $("#age" + room).css({
         display: "none"
      });
   }
   for (i = 0; i < 5; i++) {
      $("#" + room + i).css({
         display: "none"
      });
   }
   for (i = 0; i < childNo; i++) {
      $("#" + room + i).css({
         display: "block"
      });
   }
   var room = $("#rooms").val();
   var adult = $('#roomsadults option:selected').val();
   var child = $("#rooms0child :selected").text();
   if ($('#rooms1adults').length && $('#rooms1adults').val().length) {
      var adult1 = $("#rooms1adults").val();
      var child1 = $("#rooms1child").val();
      adult = parseInt(adult) + parseInt(adult1);
      child = parseInt(child) + parseInt(child1);
   }
   if ($('#rooms2adults').length && $('#rooms2adults').val().length) {
      var adult2 = $("#rooms2adults").val();
      var child2 = $("#rooms2child").val();
      adult = parseInt(adult) + parseInt(adult2);
      child = parseInt(child) + parseInt(child2);
   }
   if ($('#rooms3adults').length && $('#rooms3adults').val().length) {
      var adult3 = $("#rooms3adults").val();
      var child3 = $("#rooms3child").val();
      adult = parseInt(adult) + parseInt(adult3);
      child = parseInt(child) + parseInt(child3);
   }
   if ($('#rooms4adults').length && $('#rooms4adults').val().length) {
      var adult4 = $("#rooms4adults").val();
      var child4 = $("#rooms4child").val();
      adult = parseInt(adult) + parseInt(adult4);
      child = parseInt(child) + parseInt(child4);
   }
   var text = "";
   if (room == 1) {
      text = text + "1 Room,";
   } else {
      text = text + room + " Rooms,";
   }
   if (adult == 1) {
      text = text + "1 Adult,";
   } else {
      text = text + adult + " Adults,";
   }
   if (child == 0) {
      text = text + "0 Child";
   } else if (child == 1) {
      text = text + child + " Child";
   } else {
      text = text + child + " Children";
   }
   $("#guestform").val(text);
}

function addAdult(ad) {
   var room = $("#rooms").val();
   var adult = $('#roomsadults option:selected').val();
   var child = $("#rooms0child :selected").text();
   if ($('#rooms1adults').length && $('#rooms1adults').val().length) {
      var adult1 = $("#rooms1adults").val();
      var child1 = $("#rooms1child").val();
      adult = parseInt(adult) + parseInt(adult1);
      child = parseInt(child) + parseInt(child1);
   }
   if ($('#rooms2adults').length && $('#rooms2adults').val().length) {
      var adult2 = $("#rooms2adults").val();
      var child2 = $("#rooms2child").val();
      adult = parseInt(adult) + parseInt(adult2);
      child = parseInt(child) + parseInt(child2);
   }
   if ($('#rooms3adults').length && $('#rooms3adults').val().length) {
      var adult3 = $("#rooms3adults").val();
      var child3 = $("#rooms3child").val();
      adult = parseInt(adult) + parseInt(adult3);
      child = parseInt(child) + parseInt(child3);
   }
   if ($('#rooms4adults').length && $('#rooms4adults').val().length) {
      var adult4 = $("#rooms4adults").val();
      var child4 = $("#rooms4child").val();
      adult = parseInt(adult) + parseInt(adult4);
      child = parseInt(child) + parseInt(child4);
   }
   var text = "";
   if (room == 1) {
      text = text + "1 Room,";
   } else {
      text = text + room + " Rooms,";
   }
   if (adult == 1) {
      text = text + "1 Adult,";
   } else {
      text = text + adult + " Adults,";
   }
   if (child == 0) {
      text = text + "0 Child";
   } else if (child == 1) {
      text = text + child + " Child";
   } else {
      text = text + child + " Children";
   }
   $("#guestform").val(text);
}

function removeFun(roomcount) {
   if (roomcount == '0') {
      $("#removeroom").css({
         display: "none"
      });
   } else {
      $("#removeroom").css({
         display: "inline-block"
      });
   }
};
$(document).ready(function () {
   var apiKey = "X74hmOunUSNWzzCjBEr5p8LJCX0YQOik";
   var language = "en";
   navigator.geolocation.watchPosition(callback);

   function callback(position) {
      var GEOCODING = '//maps.googleapis.com/maps/api/geocode/json?latlng=' + position.coords.latitude + '%2C' + position.coords.longitude + '&language=en';
      try {
         $.getJSON(GEOCODING).done(function (location) {
            if ($('#froCity').val() == "") {
               var city = location.results[0].address_components[5].long_name;
               var country = location.results[0].address_components[6].long_name;
               angular.element(document.getElementById('cffId')).scope().getDeal(position.coords.latitude, position.coords.longitude);
               $('#froCity').addClass('input_cont x');
            }
         })
      } catch (err) {}
   }
});

function checkMonth(dateString) {
   var enteredMS = new Date(dateString.replace(/-/g, '/')).getTime();
   var currentMS = new Date().getTime();
   var twoMonthMS = new Date(new Date().setMonth(new Date().getMonth() + 2)).getTime();
   if (enteredMS >= currentMS) {
      return true;
   }
   return false;
}
var myapp = angular.module("Cffhome", ["LocalStorageModule"]);
! function () {
   myapp.controller('homeCtrl', ['$http', '$window', '$scope', 'localStorageService', '$timeout', function ($http, $window, $scope, localStorageService, $timeout) {
      var vm = this;
      $scope.searchQueryList = [];
      $scope.sessQueryList = [];
      $scope.lastItem = [];
      $scope.dealList = [];
      $scope.cabinClass = "Economy";
      $http.get('/getNerabyAirport').success(function (response) {
         console.log(response);
         if (!response.includes("DOCTYPE")) {
            if (response != 'none') {
               $scope.froCity = response;
            }
         } else {
            if ($('#froCity').val() == "") {
               $('#froCity').removeClass('input_cont x');
            }
         }
      }).error(function (error) {})
      $scope.getDeal = function (longitude, latitude) {
         var post_data = {
            'longitude': longitude,
            'latitude': latitude,
         }
         $http.post('/getDeals', post_data).success(function (response) {
            if (!response.includes("DOCTYPE")) {
               if (response != 'none') {
                  $scope.froCity = response;
               }
            } else {
               $('#froCity').removeClass('input_cont x');
            }
         }).error(function (error) {})
      };
      $scope.getStars = function (rating) {
         var val = parseFloat(rating);
         var size = val / 5 * 100;
         return size + '%';
      };
      $scope.convertToDate = function (stringDate) {
         stringDate = stringDate.replace(/-/g, '/');
         var dateOut = new Date(stringDate);
         dateOut.setDate(dateOut.getDate());
         return dateOut;
      };
      $scope.leadingZero = function (value) {
         if (value < 10) {
            return "0" + value.toString();
         }
         return value.toString();
      }
      $scope.CarDealSearch = function (city, cityCode, carType, pickupdate, pickuptime, dropoffdate, dropofftime, vendorCode) {
         var currDate = new Date();
         currDate.setMonth(currDate.getMonth() + 1);
         pickuptime = '10:00';
         dropofftime = '10:00';
         var addedPickDate = $scope.leadingZero(currDate.getMonth() + 1) + '-' + $scope.leadingZero(currDate.getDate()) + '-' + currDate.getFullYear();
         currDate.setDate(currDate.getDate() + 3);
         var addedDropDate = $scope.leadingZero(currDate.getMonth() + 1) + '-' + $scope.leadingZero(currDate.getDate()) + '-' + currDate.getFullYear();
         $('#pickLocation').val(city);
         $('#vehicleType').val(carType);
         $('#pickDate').val(addedPickDate);
         $('#pickTime').val(pickuptime);
         $('#dropDate').val(addedDropDate);
         $('#dropTime').val(dropofftime);
         $('#vendorCode').val(vendorCode);
         $('#pickUpLocationCode').val(cityCode);
         $('#dropOffLocationCode').val("");
         $('#driverAge').val("35");
         carSearchSubmit();
      }
      $scope.submitSearch = function (id) {
         if (id.stayCity === undefined) {
            $scope.froCity = id.OriginAirport.CityName + "(" + id.OriginAirport.AirportCode + "), " + id.OriginAirport.AirportName + ", " + id.OriginAirport.Country;
            $scope.toCity = id.DestinationAirport.CityName + "(" + id.DestinationAirport.AirportCode + "), " + id.DestinationAirport.AirportName + ", " + id.DestinationAirport.Country;
            if (checkMonth(id.TravelDate)) {
               $scope.departDate = id.TravelDate;
            } else {
               var mx = 2;
               var minDate = new Date();
               minDate.setDate(minDate.getDate() + mx);
               var dt_to = $.datepicker.formatDate('M dd, yy', minDate);
               $scope.departDate = dt_to;
            }
            $scope.airlines = "All";
            $scope.FlexibleSearch = "false";
            $scope.showSomething = function (input) {
               return input == "true" ? "2" : "1";
            };
            $scope.tripType = $scope.showSomething(id.SearchReturnFlight);
            if (id.SearchReturnFlight == "true") {
               ddlTypejourneyChange(2);
               angular.element(document.getElementById('returnDate'))[0].disabled = false;
               if (checkMonth(id.ReturnDate)) {
                  $scope.returnDate = id.ReturnDate;
               } else {
                  var mx = 9;
                  var minDate = new Date();
                  minDate.setDate(minDate.getDate() + mx);
                  var dt_to = $.datepicker.formatDate('M dd, yy', minDate);
                  $scope.returnDate = dt_to;
               }
            } else {
               ddlTypejourneyChange(1);
               angular.element(document.getElementById('returnDate'))[0].disabled = true;
            }
            $scope.cabinClass = id.CabinType;
            $scope.adult = String(id.Adults);
            $scope.child = String(id.Children);
            $scope.infant = String(id.Infants);
            $scope.infantWs = String(id.InfantWs);
            $scope.filterTextTimeout;
            if ($scope.filterTextTimeout) $timeout.cancel($scope.filterTextTimeout);
            $scope.filterTextTimeout = $timeout(function () {
               submitForm();
            }, 250);
         } else {
            $scope.stayCity = id.stayCity;
            $scope.checkInDate = id.checkInDate;
            $scope.checkOutDate = id.checkOutDate;
            $scope.rooms = "1";
            $scope.rooms0adult = "1";
            $scope.rooms0child = "0";
            $scope.filterTextTimeout;
            if ($scope.filterTextTimeout) $timeout.cancel($scope.filterTextTimeout);
            $scope.filterTextTimeout = $timeout(function () {
               submitHotelForm();
            }, 250);
         }
      };
      $scope.newarr = [];
      if (localStorageService.get("lkhistory") != null) {
         $scope.sessQueryList = localStorageService.get("lkhistory");
         angular.forEach($scope.sessQueryList, function (tech) {
            var res = JSON.parse(tech);
            if (res.stayCity === undefined) {
               if (res.CabinType === undefined) {} else {
                  $scope.searchQueryList.push(JSON.parse(tech));
               }
            } else {
               $scope.searchQueryList.push(JSON.parse(tech));
            }
         });
         $scope.newarrs = [];
         $scope.unique = {};
         angular.forEach($scope.searchQueryList, function (item) {
            if (item.stayCity === undefined) {
               if (item.SearchReturnFlight == "true") {
                  if (!$scope.unique[item.TripType + item.OriginAirport.AirportCode + item.DestinationAirport.AirportCode + item.TravelDate + item.ReturnDate]) {
                     $scope.newarrs.push(item);
                     $scope.unique[item.TripType + item.OriginAirport.AirportCode + item.DestinationAirport.AirportCode + item.TravelDate + item.ReturnDate] = item;
                  }
               } else {
                  if (!$scope.unique[item.TripType + item.OriginAirport.AirportCode + item.DestinationAirport.AirportCode + item.TravelDate]) {
                     $scope.newarrs.push(item);
                     $scope.unique[item.TripType + item.OriginAirport.AirportCode + item.DestinationAirport.AirportCode + item.TravelDate] = item;
                  }
               }
            } else {
               if (!$scope.unique[item.stayCity + item.checkInDate + item.checkOutDate]) {
                  $scope.newarrs.push(item);
                  $scope.unique[item.stayCity + item.checkInDate + item.checkOutDate] = item;
               }
            }
         });
         $scope.hotelItem = [];
         $scope.currentItem = [];
         $scope.lastItem = [];
         if ($scope.newarrs.length >= 4) {
            $scope.newarr = $scope.newarrs.slice(-3);
         } else {
            $scope.newarr = $scope.newarrs;
         }
         var index = $scope.newarr.length;
         angular.forEach($scope.newarr, function (item) {
            $scope.currentItem = item;
            if ($scope.currentItem.CabinType === undefined) {} else {
               $scope.lastItem = item;
            }
            if ($scope.currentItem.stayCity === undefined) {} else {
               $scope.hotelItem = item;
            }
            index = index - 1;
         });
         if ($scope.hotelItem.length != 0) {
            $scope.stayCity = $scope.hotelItem.stayCity;
            if (checkMonth($scope.hotelItem.checkInDate)) {
               $scope.checkInDate = $scope.hotelItem.checkInDate;
               $scope.checkOutDate = $scope.hotelItem.checkOutDate;
            } else {
               var ch = 2;
               checkInDate = new Date();
               checkInDate.setDate(checkInDate.getDate() + ch);
               var xs = 7;
               returnsDate = new Date();
               returnsDate.setDate(returnsDate.getDate() + xs);
               var checkInDate_from = $.datepicker.formatDate('M dd, yy', checkInDate);
               var dt_from = $.datepicker.formatDate('M dd, yy', returnsDate);
               $scope.checkInDate = checkInDate_from;
               $scope.checkOutDate = dt_from;
            }
            $scope.rooms = "1";
            $scope.rooms0adult = "1";
            $scope.rooms0child = "0";
         } else {
            var ch = 2;
            checkInDate = new Date();
            checkInDate.setDate(checkInDate.getDate() + ch);
            var xs = 7;
            returnsDate = new Date();
            returnsDate.setDate(returnsDate.getDate() + xs);
            var checkInDate_from = $.datepicker.formatDate('M dd, yy', checkInDate);
            var dt_from = $.datepicker.formatDate('M dd, yy', returnsDate);
            $scope.checkInDate = checkInDate_from;
            $scope.checkOutDate = dt_from;
            $scope.rooms = "1";
            $scope.rooms0adult = "1";
            $scope.rooms0child = "0";
         }
         if ($scope.lastItem.length != 0) {
            $scope.froCity = $scope.lastItem.OriginAirport.CityName + "(" + $scope.lastItem.OriginAirport.AirportCode + "), " + $scope.lastItem.OriginAirport.AirportName + ", " + $scope.lastItem.OriginAirport.Country;
            $scope.toCity = $scope.lastItem.DestinationAirport.CityName + "(" + $scope.lastItem.DestinationAirport.AirportCode + "), " + $scope.lastItem.DestinationAirport.AirportName + ", " + $scope.lastItem.DestinationAirport.Country;
            angular.element(document.getElementById("froCity")).addClass("input_cont x");
            angular.element(document.getElementById("toCity")).addClass("input_cont x");
            if (checkMonth($scope.lastItem.TravelDate)) {
               $scope.departDate = $scope.lastItem.TravelDate;
            } else {
               var mx = 2;
               var minDate = new Date();
               minDate.setDate(minDate.getDate() + mx);
               var dt_to = $.datepicker.formatDate('M dd, yy', minDate);
               $scope.departDate = dt_to;
            }
            $scope.airlines = "All";
            $scope.FlexibleSearch = "false";
            $scope.showSomething = function (input) {
               return input == "true" ? "2" : "1";
            };
            $scope.tripType = $scope.showSomething($scope.lastItem.SearchReturnFlight);
            if ($scope.tripType == "2") {
               if (checkMonth($scope.lastItem.ReturnDate)) {
                  $scope.returnDate = $scope.lastItem.ReturnDate;
               } else {
                  var mx = 9;
                  var minDate = new Date();
                  minDate.setDate(minDate.getDate() + mx);
                  var dt_to = $.datepicker.formatDate('M dd, yy', minDate);
                  $scope.returnDate = dt_to;
               }
               $scope.tripType = "2";
               angular.element(document.getElementById('tripType'))[0].value = "2";
               ddlTypejourneyChange(2);
               $('#rt').attr('checked', 'checked');
            } else if ($scope.tripType == "1") {
               ddlTypejourneyChange(1);
               $scope.tripType = "1";
               angular.element(document.getElementById('tripType'))[0].value = "1";
               $('#ow').attr('checked', 'checked');
            }
            $scope.cabinClass = $scope.lastItem.CabinType;
            $scope.adult = String($scope.lastItem.Adults);
            $scope.child = String($scope.lastItem.Children);
            $scope.infant = String($scope.lastItem.Infants);
            $scope.infantWs = String($scope.lastItem.InfantWs);
            var sv = String($scope.lastItem.Adults);
            var sv1 = String($scope.lastItem.Children);
            var sv2 = String($scope.lastItem.Infants);
            var sv3 = String($scope.lastItem.InfantWs);
            var total = parseInt(sv) + parseInt(sv1) + parseInt(sv2) + parseInt(sv3);
            if (total > 1) {
               $("#person").val(total + " Travelers ");
            } else {
               $("#person").val(total + " Adult ");
            }
         } else {
            $scope.tripType = "2";
            angular.element(document.getElementById('tripType'))[0].value = "2";
            $scope.airlines = "All";
            $scope.FlexibleSearch = "false";
            $scope.cabinClass = "Economy";
            $scope.adult = "1";
            $scope.child = "0";
            $scope.infant = "0";
            $scope.infantWs = "0";
            var mx = 2;
            var minDate = new Date();
            minDate.setDate(minDate.getDate() + mx);
            var x = 11;
            var maxDate = new Date();
            maxDate.setMonth(maxDate.getMonth() + x);
            var xs = 7;
            returnsDate = new Date();
            returnsDate.setDate(returnsDate.getDate() + xs);
            var dt_to = $.datepicker.formatDate('M dd, yy', minDate);
            var dt_from = $.datepicker.formatDate('M dd, yy', returnsDate);
            $scope.departDate = dt_to;
            $scope.returnDate = dt_from;
         }
      } else {
         $scope.tripType = "2";
         angular.element(document.getElementById('tripType'))[0].value = "2";
         $scope.airlines = "All";
         $scope.FlexibleSearch = "false";
         $scope.cabinClass = "Economy";
         $scope.adult = "1";
         $scope.child = "0";
         $scope.infant = "0";
         $scope.infantWs = "0";
         var mx = 2;
         var minDate = new Date();
         minDate.setDate(minDate.getDate() + mx);
         var x = 11;
         var maxDate = new Date();
         maxDate.setMonth(maxDate.getMonth() + x);
         var xs = 7;
         returnsDate = new Date();
         returnsDate.setDate(returnsDate.getDate() + xs);
         var dt_to = $.datepicker.formatDate('M dd, yy', minDate);
         var dt_from = $.datepicker.formatDate('M dd, yy', returnsDate);
         $scope.departDate = dt_to;
         $scope.returnDate = dt_from;
         var ch = 2;
         checkInDate = new Date();
         checkInDate.setDate(checkInDate.getDate() + ch);
         var checkInDate_from = $.datepicker.formatDate('M dd, yy', checkInDate);
         $scope.checkInDate = checkInDate_from;
         $scope.checkOutDate = dt_from;
         $scope.rooms = "1";
         $scope.rooms0adult = "1";
         $scope.rooms0child = "0";
      }
      if ($scope.newarr.length == 1) {
         var placeholder2 = document.getElementById('searchPadList');
         placeholder2.innerHTML = "<b class='history-show'>1</b>";
      } else if ($scope.newarr.length == 2) {
         var placeholder2 = document.getElementById('searchPadList');
         placeholder2.innerHTML = "<b class='history-show'>2</b>";
      } else if ($scope.newarr.length > 2) {
         var placeholder2 = document.getElementById('searchPadList');
         placeholder2.innerHTML = "<b class='history-show'>3</b>";
      }
      var homeDealCounter = 0;
      $(window).scroll(function () {
         if ($(window).scrollTop() > 200 && homeDealCounter == 0) {
            homeDealCounter++;
            $http.get("/getHomeDeals").then(function (response) {
               $scope.homeDeals = response.data;
               console.log($scope.homeDeals);
            });
         }
      });
      $scope.submitSearchFlight = function (fro, to, frodate, todate, tripType) {
         var myDate = new Date();
         document.getElementById('froCity').value = fro;
         document.getElementById('toCity').value = to;
         if (tripType == 'RoundTrip') {
            ddlTypejourneyChange(2);
            document.getElementById('tripType').value = 2;
            document.getElementById('departDate').value = frodate;
            document.getElementById('returnDate').value = todate;
         }
         if (tripType == 'OneWay') {
            ddlTypejourneyChange(1);
            document.getElementById('tripType').value = 1;
            document.getElementById('departDate').value = frodate;
         }
         document.getElementById('cabinClass').value = 'Economy';
         document.getElementById('adult').value = 1;
         document.getElementById('child').value = 0;
         document.getElementById('infant').value = 0;
         document.getElementById('infantWs').value = 0;
         submitForm();
      }
   }]);
}();
$('#ui-datepicker-div').on('mouseenter', 'td', function () {
   var startDate = $('#departDate').datepicker("getDate");
   if (startDate == null) {
      startDate = $('#checkIn').datepicker("getDate");
   }
   if (startDate == null) {
      if (startDate) {
         var cell = $(this);
         cell.addClass('between-date');
         var hover_day = $(this).text();
         var hover_month = $(this).attr("data-month");
         var hover_year = $(this).parent().siblings('td').attr("data-year");
         $('#ui-datepicker-div tr td').removeClass('between-date');
         if (hover_day >= startDate.getDate() || hover_month >= startDate.getMonth()) {
            if (hover_month >= startDate.getMonth()) {
               $('tr td a').each(function (index, value) {
                  var month_match = parseInt($(this).text());
                  var pppp = $(this).parent().data('month');
                  if (month_match <= hover_day && pppp <= hover_month) {
                     $(this).parent().addClass('between-date');
                  }
                  if (pppp < hover_month) {
                     $(this).parent().addClass('between-date');
                  }
               });
            }
         }
      }
   }
});

function pnfTest() {
   var searchDestinationId = document.getElementById("destinationSearchId").value;
   var searchAirportCode = document.getElementById("toCity").value;
   var airportcode = searchAirportCode.split("(")[1].substring(0, 3)
   var validatePNF = $("#pnfSearch").validate({
      rules: {
         location: {
            required: true,
            minlength: 3
         }
      },
      messages: {}
   });
   var rndId = randomString(24);
   $('form#pnfSearch').attr({
      action: '/pnfSearch/id/' + rndId
   });
   $('form#pnfSearch').submit();
   return true;
}

function pnfSearch() {
   if (pnf_data == $('#pnfSearch').serialize()) {
      $('#sameSearch').show();
      return false;
   } else {
      $('#sameSearch').hide();
      var validatePNF = $("#pnfSearch").validate({
         showErrors: function () {
            if (this.settings.highlight) {
               for (var i = 0; this.errorList[i]; ++i) {
                  this.settings.highlight.call(this, this.errorList[i].element, this.settings.errorClass, this.settings.validClass);
               }
            }
            if (this.settings.unhighlight) {
               for (var i = 0, elements = this.validElements(); elements[i]; ++i) {
                  this.settings.unhighlight.call(this, elements[i], this.settings.errorClass, this.settings.validClass);
               }
            }
         },
         rules: {
            location: {
               required: true,
               minlength: 3
            },
            arrivalDate: {
               required: true,
            },
            exitDate: {
               required: true,
            }
         },
         errorElement: "span",
         messages: {
            location: {
               required: "Please enter a valid Origin City.",
               minlength: "Origin City must consist of at least 3 characters"
            },
            arrivalDate: {
               required: "Please enter a valid Arrival Date.",
            },
            exitDate: {
               required: "Please enter a valid Exit Date.",
            }
         }
      });
      if (validatePNF.form()) {
         var rndId = randomString(24);
         if ($('#currentDevice').val() == "Normal") {
            $('form#pnfSearch').attr({
               action: '/pnfSearch/id/' + rndId
            });
         } else if ($('#currentDevice').val() == "Mobile") {
            $('form#pnfSearch').attr({
               action: '/m/pnfSearch/id/' + rndId
            });
         } else if ($('#currentDevice').val() == "Tablet") {
            $('form#pnfSearch').attr({
               action: '/t/pnfSearch/id/' + rndId
            });
         } else {
            $('form#pnfSearch').attr({
               action: '/pnfSearch/id/' + rndId
            });
         }
         $('form#flightSearch').submit();
         $('form#pnfSearch').submit();
      }
   }
}

function carSearchSubmit() {
   var searchDestinationId = document.getElementById("destinationSearchId").value;
   var validateCar = $("#carSearch").validate({
      rules: {
         pickLocation: {
            required: true,
            minlength: 3
         },
         dropLocation: {
            required: true,
            minlength: 3
         },
         pickDate: "required",
         dropDate: "required",
         driverAge: "required"
      },
      errorElement: "span",
      messages: {
         pickLocation: {
            required: "Please Enter Pick up Location.",
            minlength: "Destination City must consist of at least 3 characters"
         },
         dropLocation: "",
         pickDate: "",
         dropDate: "",
         driverAge: ""
      }
   });
   var carStartDate = $('#pickDate').val();
   var carEndDate = $('#dropDate').val();
   var carStartTime = $('#pickTime').val();
   var carEndTime = $('#dropTime').val();
   if ((carStartDate == carEndDate) && (carStartTime >= carEndTime)) {
      $("#carError").html("<i class='fa fa-exclamation-triangle'></i> Drop time should be greater than Pick-up time.");
      return false;
   }
   var rndId = randomString(24);
   if (searchDestinationId == 'destination_search') {
      $('form#carSearch').attr({
         action: '/carSearch/id/' + rndId
      });
   } else {
      $('form#carSearch').attr({
         action: 'carSearch/id/' + rndId
      });
   }
   $('form#carSearch').submit();
}

function advaOptionsShow() {
   $("#advaOptionsDiv").slideToggle();
}

function driverAgeShow() {
   $("#driverAgeDiv").slideToggle();
}

function movePaymentPage(uniqueId) {
   window.location = "/parknfly/payment/" + uniqueId;
};

function submitSearchFlight(fro, to, frodate, todate, tripType) {
   var myDate = new Date();
   document.getElementById('froCity').value = fro;
   document.getElementById('toCity').value = to;
   if (tripType == 'RoundTrip') {
      ddlTypejourneyChange(2);
      document.getElementById('tripType').value = 2;
      document.getElementById('departDate').value = frodate;
      document.getElementById('returnDate').value = todate;
   }
   if (tripType == 'OneWay') {
      ddlTypejourneyChange(1);
      document.getElementById('tripType').value = 1;
      document.getElementById('departDate').value = frodate;
   }
   document.getElementById('cabinClass').value = 'Economy';
   document.getElementById('adult').value = 1;
   document.getElementById('child').value = 0;
   document.getElementById('infant').value = 0;
   document.getElementById('infantWs').value = 0;
   submitForm();
}

function hotelDetailDealSearch(cffHotelId, checkin, checkout) {
   if ($('#currentDevice').val() == "Normal") {
      window.location.href = '/dealHotels/' + cffHotelId + "/" + checkin + "/" + checkout;
   } else if ($('#currentDevice').val() == "Mobile") {
      window.location.href = '/m/dealHotels/' + cffHotelId + "/" + checkin + "/" + checkout;
   } else if ($('#currentDevice').val() == "Tablet") {
      window.location.href = '/t/dealHotels/' + cffHotelId + "/" + checkin + "/" + checkout;
   } else {
      window.location.href = '/dealHotels/' + cffHotelId + "/" + checkin + "/" + checkout;
   }
};